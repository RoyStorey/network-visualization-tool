{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nimport Cursor from \"./cursor.mjs\";\nimport { SEPARATOR, NO_ITEMS, predefinedItems } from \"./predefinedItems.mjs\";\nimport { filterSeparators, hasSubMenu, isDisabled, isItemHidden, isSeparator, isSelectionDisabled, normalizeSelection } from \"./utils.mjs\";\nimport Core from \"../../core.mjs\";\nimport EventManager from \"../../eventManager.mjs\";\nimport { arrayEach, arrayFilter, arrayReduce } from \"../../helpers/array.mjs\";\nimport { isWindowsOS, isMobileBrowser, isIpadOS } from \"../../helpers/browser.mjs\";\nimport { addClass, empty, fastInnerHTML, isChildOf, isInput, removeClass, getParentWindow, hasClass } from \"../../helpers/dom/element.mjs\";\nimport { isRightClick } from \"../../helpers/dom/event.mjs\";\nimport { debounce, isFunction } from \"../../helpers/function.mjs\";\nimport { isUndefined, isDefined } from \"../../helpers/mixed.mjs\";\nimport { mixin, hasOwnProperty } from \"../../helpers/object.mjs\";\nimport localHooks from \"../../mixins/localHooks.mjs\";\nvar MIN_WIDTH = 215;\nvar SHORTCUTS_CONTEXT = 'menu';\nvar SHORTCUTS_GROUP = SHORTCUTS_CONTEXT;\n\n/**\n * @typedef MenuOptions\n * @property {Menu} [parent=null] Instance of {@link Menu}.\n * @property {string} [name=null] Name of the menu.\n * @property {string} [className=''] Custom class name.\n * @property {boolean} [keepInViewport=true] Determine if should be kept in viewport.\n * @property {boolean} [standalone] Enabling closing menu when clicked element is not belongs to menu itself.\n * @property {number} [minWidth=MIN_WIDTH] The minimum width.\n * @property {HTMLElement} [container] The container.\n */\n\n/**\n * @private\n * @class Menu\n */\nvar Menu = /*#__PURE__*/function () {\n  /**\n   * @param {Core} hotInstance Handsontable instance.\n   * @param {MenuOptions} [options] Menu options.\n   */\n  function Menu(hotInstance, options) {\n    _classCallCheck(this, Menu);\n    this.hot = hotInstance;\n    this.options = options || {\n      parent: null,\n      name: null,\n      className: '',\n      keepInViewport: true,\n      standalone: false,\n      minWidth: MIN_WIDTH,\n      container: this.hot.rootDocument.documentElement\n    };\n    this.eventManager = new EventManager(this);\n    this.container = this.createContainer(this.options.name);\n    this.hotMenu = null;\n    this.hotSubMenus = {};\n    this.parentMenu = this.options.parent || null;\n    this.menuItems = null;\n    this.origOutsideClickDeselects = null;\n    this.keyEvent = false;\n    this.offset = {\n      above: 0,\n      below: 0,\n      left: 0,\n      right: 0\n    };\n    this._afterScrollCallback = null;\n    this.registerEvents();\n  }\n\n  /**\n   * Register event listeners.\n   *\n   * @private\n   */\n  _createClass(Menu, [{\n    key: \"registerEvents\",\n    value: function registerEvents() {\n      var _this = this;\n      var frame = this.hot.rootWindow;\n      while (frame) {\n        this.eventManager.addEventListener(frame.document, 'mousedown', function (event) {\n          return _this.onDocumentMouseDown(event);\n        });\n        this.eventManager.addEventListener(frame.document, 'contextmenu', function (event) {\n          return _this.onDocumentContextMenu(event);\n        });\n        frame = getParentWindow(frame);\n      }\n    }\n\n    /**\n     * Set array of objects which defines menu items.\n     *\n     * @param {Array} menuItems Menu items to display.\n     */\n  }, {\n    key: \"setMenuItems\",\n    value: function setMenuItems(menuItems) {\n      this.menuItems = menuItems;\n    }\n\n    /**\n     * Returns currently selected menu item. Returns `null` if no item was selected.\n     *\n     * @returns {object|null}\n     */\n  }, {\n    key: \"getSelectedItem\",\n    value: function getSelectedItem() {\n      return this.hasSelectedItem() ? this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]) : null;\n    }\n\n    /**\n     * Checks if the menu has selected (highlighted) any item from the menu list.\n     *\n     * @returns {boolean}\n     */\n  }, {\n    key: \"hasSelectedItem\",\n    value: function hasSelectedItem() {\n      return Array.isArray(this.hotMenu.getSelectedLast());\n    }\n\n    /**\n     * Set offset menu position for specified area (`above`, `below`, `left` or `right`).\n     *\n     * @param {string} area Specified area name (`above`, `below`, `left` or `right`).\n     * @param {number} offset Offset value.\n     */\n  }, {\n    key: \"setOffset\",\n    value: function setOffset(area) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      this.offset[area] = offset;\n    }\n\n    /**\n     * Check if menu is using as sub-menu.\n     *\n     * @returns {boolean}\n     */\n  }, {\n    key: \"isSubMenu\",\n    value: function isSubMenu() {\n      return this.parentMenu !== null;\n    }\n\n    /**\n     * Open menu.\n     *\n     * @fires Hooks#beforeContextMenuShow\n     * @fires Hooks#afterContextMenuShow\n     */\n  }, {\n    key: \"open\",\n    value: function open() {\n      var _this2 = this;\n      this.runLocalHooks('beforeOpen');\n      this.container.removeAttribute('style');\n      this.container.style.display = 'block';\n      var delayedOpenSubMenu = debounce(function (row) {\n        return _this2.openSubMenu(row);\n      }, 300);\n      var minWidthOfMenu = this.options.minWidth || MIN_WIDTH;\n      var noItemsDefined = false;\n      var filteredItems = arrayFilter(this.menuItems, function (item) {\n        if (item.key === NO_ITEMS) {\n          noItemsDefined = true;\n        }\n        return isItemHidden(item, _this2.hot);\n      });\n      if (filteredItems.length < 1 && !noItemsDefined) {\n        filteredItems.push(predefinedItems()[NO_ITEMS]);\n      } else if (filteredItems.length === 0) {\n        return;\n      }\n      filteredItems = filterSeparators(filteredItems, SEPARATOR);\n      var shouldAutoCloseMenu = false;\n      var settings = {\n        data: filteredItems,\n        colHeaders: false,\n        autoColumnSize: true,\n        autoWrapRow: false,\n        modifyColWidth: function modifyColWidth(width) {\n          if (isDefined(width) && width < minWidthOfMenu) {\n            return minWidthOfMenu;\n          }\n          return width;\n        },\n        autoRowSize: false,\n        readOnly: true,\n        editor: false,\n        copyPaste: false,\n        maxCols: 1,\n        columns: [{\n          data: 'name',\n          renderer: function renderer(hot, TD, row, col, prop, value) {\n            return _this2.menuItemRenderer(hot, TD, row, col, prop, value);\n          }\n        }],\n        renderAllRows: true,\n        fragmentSelection: false,\n        outsideClickDeselects: false,\n        disableVisualSelection: 'area',\n        layoutDirection: this.hot.isRtl() ? 'rtl' : 'ltr',\n        afterOnCellMouseOver: function afterOnCellMouseOver(event, coords) {\n          if (_this2.isAllSubMenusClosed()) {\n            delayedOpenSubMenu(coords.row);\n          } else {\n            _this2.openSubMenu(coords.row);\n          }\n        },\n        rowHeights: function rowHeights(row) {\n          return filteredItems[row].name === SEPARATOR ? 1 : 23;\n        },\n        afterOnCellContextMenu: function afterOnCellContextMenu(event) {\n          event.preventDefault();\n\n          // On the Windows platform, the \"contextmenu\" is triggered after the \"mouseup\" so that's\n          // why the closing menu is here. (#6507#issuecomment-582392301).\n          if (isWindowsOS() && shouldAutoCloseMenu && _this2.hasSelectedItem()) {\n            _this2.close(true);\n          }\n        },\n        beforeOnCellMouseUp: function beforeOnCellMouseUp(event) {\n          if (_this2.hasSelectedItem()) {\n            shouldAutoCloseMenu = !_this2.isCommandPassive(_this2.getSelectedItem());\n            _this2.executeCommand(event);\n          }\n        },\n        afterOnCellMouseUp: function afterOnCellMouseUp(event) {\n          // If the code runs on the other platform than Windows, the \"mouseup\" is triggered\n          // after the \"contextmenu\". So then \"mouseup\" closes the menu. Otherwise, the closing\n          // menu responsibility is forwarded to \"afterOnCellContextMenu\" callback (#6507#issuecomment-582392301).\n          if ((!isWindowsOS() || !isRightClick(event)) && shouldAutoCloseMenu && _this2.hasSelectedItem()) {\n            // The timeout is necessary only for mobile devices. For desktop, the click event that is fired\n            // right after the mouseup event gets the event element target the same as the mouseup event.\n            // For mobile devices, the click event is triggered with native delay (~300ms), so when the mouseup\n            // event hides the tapped element, the click event grabs the element below. As a result, the filter\n            // by condition menu is closed and immediately open on tapping the \"None\" item.\n            if (isMobileBrowser() || isIpadOS()) {\n              setTimeout(function () {\n                return _this2.close(true);\n              }, 325);\n            } else {\n              _this2.close(true);\n            }\n          }\n        },\n        afterUnlisten: function afterUnlisten() {\n          // Restore menu focus, fix for `this.instance.unlisten();` call in the tableView.js@260 file.\n          // This prevents losing table responsiveness for keyboard events when filter select menu is closed (#6497).\n          if (!_this2.hasSelectedItem() && _this2.isOpened()) {\n            _this2.hotMenu.listen();\n          }\n        }\n      };\n      this.origOutsideClickDeselects = this.hot.getSettings().outsideClickDeselects;\n      this.hot.getSettings().outsideClickDeselects = false;\n      this.hotMenu = new Core(this.container, settings);\n      this.hotMenu.addHook('afterInit', function () {\n        return _this2.onAfterInit();\n      });\n      this.hotMenu.addHook('afterSelection', function () {\n        return _this2.onAfterSelection.apply(_this2, arguments);\n      });\n      this.hotMenu.init();\n      this.hotMenu.listen();\n      var shortcutManager = this.hotMenu.getShortcutManager();\n      var menuContext = shortcutManager.addContext(SHORTCUTS_GROUP);\n      var config = {\n        group: SHORTCUTS_CONTEXT\n      };\n      var menuContextConfig = _objectSpread(_objectSpread({}, config), {}, {\n        runOnlyIf: function runOnlyIf(event) {\n          return isInput(event.target) === false || _this2.container.contains(event.target) === false;\n        }\n      });\n\n      // Default shortcuts for Handsontable should not be handled. Changing context will help with that.\n      shortcutManager.setActiveContextName('menu');\n      menuContext.addShortcuts([{\n        keys: [['Escape']],\n        callback: function callback() {\n          _this2.keyEvent = true;\n          _this2.close();\n          _this2.keyEvent = false;\n        }\n      }, {\n        keys: [['ArrowDown']],\n        callback: function callback() {\n          var selection = _this2.hotMenu.getSelectedLast();\n          _this2.keyEvent = true;\n          if (selection) {\n            _this2.selectNextCell(selection[0], selection[1]);\n          } else {\n            _this2.selectFirstCell();\n          }\n          _this2.keyEvent = false;\n        }\n      }, {\n        keys: [['ArrowUp']],\n        callback: function callback() {\n          var selection = _this2.hotMenu.getSelectedLast();\n          _this2.keyEvent = true;\n          if (selection) {\n            _this2.selectPrevCell(selection[0], selection[1]);\n          } else {\n            _this2.selectLastCell();\n          }\n          _this2.keyEvent = false;\n        }\n      }, {\n        keys: [['ArrowRight']],\n        callback: function callback() {\n          var selection = _this2.hotMenu.getSelectedLast();\n          _this2.keyEvent = true;\n          if (selection) {\n            var menu = _this2.openSubMenu(selection[0]);\n            if (menu) {\n              menu.selectFirstCell();\n            }\n          }\n          _this2.keyEvent = false;\n        }\n      }, {\n        keys: [['ArrowLeft']],\n        callback: function callback() {\n          var selection = _this2.hotMenu.getSelectedLast();\n          _this2.keyEvent = true;\n          if (selection && _this2.isSubMenu()) {\n            _this2.close();\n            if (_this2.parentMenu) {\n              _this2.parentMenu.hotMenu.listen();\n            }\n          }\n          _this2.keyEvent = false;\n        }\n      }, {\n        keys: [['Enter']],\n        callback: function callback(event) {\n          var selection = _this2.hotMenu.getSelectedLast();\n          _this2.keyEvent = true;\n          if (!_this2.hotMenu.getSourceDataAtRow(selection[0]).submenu) {\n            _this2.executeCommand(event);\n            _this2.close(true);\n          }\n          _this2.keyEvent = false;\n        }\n      }, {\n        keys: [['PageUp']],\n        callback: function callback() {\n          var selection = _this2.hotMenu.getSelectedLast();\n          _this2.keyEvent = true;\n          if (selection) {\n            _this2.hotMenu.selection.transformStart(-_this2.hotMenu.countVisibleRows(), 0);\n          } else {\n            _this2.selectFirstCell();\n          }\n          _this2.keyEvent = false;\n        }\n      }, {\n        keys: [['PageDown']],\n        callback: function callback() {\n          var selection = _this2.hotMenu.getSelectedLast();\n          _this2.keyEvent = true;\n          if (selection) {\n            _this2.hotMenu.selection.transformStart(_this2.hotMenu.countVisibleRows(), 0);\n          } else {\n            _this2.selectLastCell();\n          }\n          _this2.keyEvent = false;\n        }\n      }], menuContextConfig);\n      this.blockMainTableCallbacks();\n      this.runLocalHooks('afterOpen');\n    }\n\n    /**\n     * Close menu.\n     *\n     * @param {boolean} [closeParent=false] If `true` try to close parent menu if exists.\n     */\n  }, {\n    key: \"close\",\n    value: function close() {\n      var closeParent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!this.isOpened()) {\n        return;\n      }\n      if (closeParent && this.parentMenu) {\n        this.parentMenu.close();\n      } else {\n        this.closeAllSubMenus();\n        this.container.style.display = 'none';\n        this.releaseMainTableCallbacks();\n        this.hotMenu.destroy();\n        this.hotMenu = null;\n        this.hot.getSettings().outsideClickDeselects = this.origOutsideClickDeselects;\n        this.runLocalHooks('afterClose');\n        if (this.parentMenu) {\n          this.parentMenu.hotMenu.listen();\n        }\n      }\n    }\n\n    /**\n     * Open sub menu at the provided row index.\n     *\n     * @param {number} row Row index.\n     * @returns {Menu|boolean} Returns created menu or `false` if no one menu was created.\n     */\n  }, {\n    key: \"openSubMenu\",\n    value: function openSubMenu(row) {\n      if (!this.hotMenu) {\n        return false;\n      }\n      var cell = this.hotMenu.getCell(row, 0);\n      this.closeAllSubMenus();\n      if (!cell || !hasSubMenu(cell)) {\n        return false;\n      }\n      var dataItem = this.hotMenu.getSourceDataAtRow(row);\n      var subMenu = new Menu(this.hot, {\n        parent: this,\n        name: dataItem.name,\n        className: this.options.className,\n        keepInViewport: true,\n        container: this.options.container\n      });\n      subMenu.setMenuItems(dataItem.submenu.items);\n      subMenu.open();\n      subMenu.setPosition(cell.getBoundingClientRect());\n      this.hotSubMenus[dataItem.key] = subMenu;\n      return subMenu;\n    }\n\n    /**\n     * Close sub menu at row index.\n     *\n     * @param {number} row Row index.\n     */\n  }, {\n    key: \"closeSubMenu\",\n    value: function closeSubMenu(row) {\n      var dataItem = this.hotMenu.getSourceDataAtRow(row);\n      var menus = this.hotSubMenus[dataItem.key];\n      if (menus) {\n        menus.destroy();\n        delete this.hotSubMenus[dataItem.key];\n      }\n    }\n\n    /**\n     * Close all opened sub menus.\n     */\n  }, {\n    key: \"closeAllSubMenus\",\n    value: function closeAllSubMenus() {\n      var _this3 = this;\n      arrayEach(this.hotMenu.getData(), function (value, row) {\n        return _this3.closeSubMenu(row);\n      });\n    }\n\n    /**\n     * Checks if all created and opened sub menus are closed.\n     *\n     * @returns {boolean}\n     */\n  }, {\n    key: \"isAllSubMenusClosed\",\n    value: function isAllSubMenusClosed() {\n      return Object.keys(this.hotSubMenus).length === 0;\n    }\n\n    /**\n     * Destroy instance.\n     */\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var menuContainerParentElement = this.container.parentNode;\n      this.clearLocalHooks();\n      this.close();\n      this.parentMenu = null;\n      this.eventManager.destroy();\n      if (menuContainerParentElement) {\n        menuContainerParentElement.removeChild(this.container);\n      }\n    }\n\n    /**\n     * Checks if menu was opened.\n     *\n     * @returns {boolean} Returns `true` if menu was opened.\n     */\n  }, {\n    key: \"isOpened\",\n    value: function isOpened() {\n      return this.hotMenu !== null;\n    }\n\n    /**\n     * Execute menu command.\n     *\n     * The `executeCommand()` method works only for selected cells.\n     *\n     * When no cells are selected, `executeCommand()` doesn't do anything.\n     *\n     * @param {Event} [event] The mouse event object.\n     */\n  }, {\n    key: \"executeCommand\",\n    value: function executeCommand(event) {\n      if (!this.isOpened() || !this.hasSelectedItem()) {\n        return;\n      }\n      var selectedItem = this.getSelectedItem();\n      this.runLocalHooks('select', selectedItem, event);\n      if (this.isCommandPassive(selectedItem)) {\n        return;\n      }\n      var selRanges = this.hot.getSelectedRange();\n      var normalizedSelection = selRanges ? normalizeSelection(selRanges) : [];\n      this.runLocalHooks('executeCommand', selectedItem.key, normalizedSelection, event);\n      if (this.isSubMenu()) {\n        this.parentMenu.runLocalHooks('executeCommand', selectedItem.key, normalizedSelection, event);\n      }\n    }\n\n    /**\n     * Checks if the passed command is passive or not. The command is passive when it's marked as\n     * disabled, the descriptor object contains `isCommand` property set to `false`, command\n     * is a separator, or the item is recognized as submenu. For passive items the menu is not\n     * closed automatically after the user trigger the command through the UI.\n     *\n     * @param {object} commandDescriptor Selected menu item from the menu data source.\n     * @returns {boolean}\n     */\n  }, {\n    key: \"isCommandPassive\",\n    value: function isCommandPassive(commandDescriptor) {\n      var isCommand = commandDescriptor.isCommand,\n        commandName = commandDescriptor.name,\n        disabled = commandDescriptor.disabled,\n        submenu = commandDescriptor.submenu;\n      var isItemDisabled = disabled === true || typeof disabled === 'function' && disabled.call(this.hot) === true;\n      return isCommand === false || commandName === SEPARATOR || isItemDisabled === true || submenu;\n    }\n\n    /**\n     * Set menu position based on dom event or based on literal object.\n     *\n     * @param {Event|object} coords Event or literal Object with coordinates.\n     */\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(coords) {\n      var cursor = new Cursor(coords, this.container.ownerDocument.defaultView);\n      if (this.options.keepInViewport) {\n        if (cursor.fitsBelow(this.container)) {\n          this.setPositionBelowCursor(cursor);\n        } else if (cursor.fitsAbove(this.container)) {\n          this.setPositionAboveCursor(cursor);\n        } else {\n          this.setPositionBelowCursor(cursor);\n        }\n        if (this.hot.isLtr()) {\n          this.setHorizontalPositionForLtr(cursor);\n        } else {\n          this.setHorizontalPositionForRtl(cursor);\n        }\n      } else {\n        this.setPositionBelowCursor(cursor);\n        this.setPositionOnRightOfCursor(cursor);\n      }\n    }\n\n    /**\n     * Set menu horizontal position for RTL mode.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n  }, {\n    key: \"setHorizontalPositionForRtl\",\n    value: function setHorizontalPositionForRtl(cursor) {\n      if (cursor.fitsOnLeft(this.container)) {\n        this.setPositionOnLeftOfCursor(cursor);\n      } else {\n        this.setPositionOnRightOfCursor(cursor);\n      }\n    }\n\n    /**\n     * Set menu horizontal position for LTR mode.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n  }, {\n    key: \"setHorizontalPositionForLtr\",\n    value: function setHorizontalPositionForLtr(cursor) {\n      if (cursor.fitsOnRight(this.container)) {\n        this.setPositionOnRightOfCursor(cursor);\n      } else {\n        this.setPositionOnLeftOfCursor(cursor);\n      }\n    }\n\n    /**\n     * Set menu position above cursor object.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n  }, {\n    key: \"setPositionAboveCursor\",\n    value: function setPositionAboveCursor(cursor) {\n      var top = this.offset.above + cursor.top - this.container.offsetHeight;\n      if (this.isSubMenu()) {\n        top = cursor.top + cursor.cellHeight - this.container.offsetHeight + 3;\n      }\n      this.container.style.top = \"\".concat(top, \"px\");\n    }\n\n    /**\n     * Set menu position below cursor object.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n  }, {\n    key: \"setPositionBelowCursor\",\n    value: function setPositionBelowCursor(cursor) {\n      var top = this.offset.below + cursor.top + 1;\n      if (this.isSubMenu()) {\n        top = cursor.top - 1;\n      }\n      this.container.style.top = \"\".concat(top, \"px\");\n    }\n\n    /**\n     * Set menu position on the right of cursor object.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n  }, {\n    key: \"setPositionOnRightOfCursor\",\n    value: function setPositionOnRightOfCursor(cursor) {\n      var left = cursor.left;\n      if (this.isSubMenu()) {\n        var _this$parentMenu$cont = this.parentMenu.container.getBoundingClientRect(),\n          parentMenuRight = _this$parentMenu$cont.right;\n\n        // move the sub menu by the width of the parent's border (usually by 1-2 pixels)\n        left += cursor.cellWidth + parentMenuRight - (cursor.left + cursor.cellWidth);\n      } else {\n        left += this.offset.right;\n      }\n      this.container.style.left = \"\".concat(left, \"px\");\n    }\n\n    /**\n     * Set menu position on the left of cursor object.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n  }, {\n    key: \"setPositionOnLeftOfCursor\",\n    value: function setPositionOnLeftOfCursor(cursor) {\n      var left = this.offset.left + cursor.left - this.container.offsetWidth;\n      if (this.isSubMenu()) {\n        var _this$parentMenu$cont2 = this.parentMenu.container.getBoundingClientRect(),\n          parentMenuLeft = _this$parentMenu$cont2.left;\n\n        // move the sub menu by the width of the parent's border (usually by 1-2 pixels)\n        left -= cursor.left - parentMenuLeft;\n      }\n      this.container.style.left = \"\".concat(left, \"px\");\n    }\n\n    /**\n     * Select first cell in opened menu.\n     */\n  }, {\n    key: \"selectFirstCell\",\n    value: function selectFirstCell() {\n      var cell = this.hotMenu.getCell(0, 0);\n      if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n        this.selectNextCell(0, 0);\n      } else {\n        this.hotMenu.selectCell(0, 0);\n      }\n    }\n\n    /**\n     * Select last cell in opened menu.\n     */\n  }, {\n    key: \"selectLastCell\",\n    value: function selectLastCell() {\n      var lastRow = this.hotMenu.countRows() - 1;\n      var cell = this.hotMenu.getCell(lastRow, 0);\n      if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n        this.selectPrevCell(lastRow, 0);\n      } else {\n        // disable default \"scroll-to-cell\" option and instead of that...\n        this.hotMenu.selectCell(lastRow, 0, undefined, undefined, false);\n        // ...scroll to the cell with \"snap to the bottom\" option\n        this.hotMenu.scrollViewportTo(lastRow, 0, true, false);\n      }\n    }\n\n    /**\n     * Select next cell in opened menu.\n     *\n     * @param {number} row Row index.\n     * @param {number} col Column index.\n     */\n  }, {\n    key: \"selectNextCell\",\n    value: function selectNextCell(row, col) {\n      var nextRow = row + 1;\n      var cell = nextRow < this.hotMenu.countRows() ? this.hotMenu.getCell(nextRow, col) : null;\n      if (!cell) {\n        return;\n      }\n      if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n        this.selectNextCell(nextRow, col);\n      } else {\n        this.hotMenu.selectCell(nextRow, col);\n      }\n    }\n\n    /**\n     * Select previous cell in opened menu.\n     *\n     * @param {number} row Row index.\n     * @param {number} col Column index.\n     */\n  }, {\n    key: \"selectPrevCell\",\n    value: function selectPrevCell(row, col) {\n      var prevRow = row - 1;\n      var cell = prevRow >= 0 ? this.hotMenu.getCell(prevRow, col) : null;\n      if (!cell) {\n        return;\n      }\n      if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n        this.selectPrevCell(prevRow, col);\n      } else {\n        this.hotMenu.selectCell(prevRow, col);\n      }\n    }\n\n    /**\n     * Menu item renderer.\n     *\n     * @private\n     * @param {Core} hot The Handsontable instance.\n     * @param {HTMLCellElement} TD The rendered cell element.\n     * @param {number} row The visual index.\n     * @param {number} col The visual index.\n     * @param {string} prop The column property if used.\n     * @param {string} value The cell value.\n     */\n  }, {\n    key: \"menuItemRenderer\",\n    value: function menuItemRenderer(hot, TD, row, col, prop, value) {\n      var _this4 = this;\n      var item = hot.getSourceDataAtRow(row);\n      var wrapper = this.hot.rootDocument.createElement('div');\n      var isSubMenu = function isSubMenu(itemToTest) {\n        return hasOwnProperty(itemToTest, 'submenu');\n      };\n      var itemIsSeparator = function itemIsSeparator(itemToTest) {\n        return new RegExp(SEPARATOR, 'i').test(itemToTest.name);\n      };\n      var itemIsDisabled = function itemIsDisabled(itemToTest) {\n        return itemToTest.disabled === true || typeof itemToTest.disabled === 'function' && itemToTest.disabled.call(_this4.hot) === true;\n      };\n      var itemIsSelectionDisabled = function itemIsSelectionDisabled(itemToTest) {\n        return itemToTest.disableSelection;\n      };\n      var itemValue = value;\n      if (typeof itemValue === 'function') {\n        itemValue = itemValue.call(this.hot);\n      }\n      empty(TD);\n      addClass(wrapper, 'htItemWrapper');\n      TD.appendChild(wrapper);\n      if (itemIsSeparator(item)) {\n        addClass(TD, 'htSeparator');\n      } else if (typeof item.renderer === 'function') {\n        addClass(TD, 'htCustomMenuRenderer');\n        TD.appendChild(item.renderer(hot, wrapper, row, col, prop, itemValue));\n      } else {\n        fastInnerHTML(wrapper, itemValue);\n      }\n      if (itemIsDisabled(item)) {\n        addClass(TD, 'htDisabled');\n        this.eventManager.addEventListener(TD, 'mouseenter', function () {\n          return hot.deselectCell();\n        });\n      } else if (itemIsSelectionDisabled(item)) {\n        addClass(TD, 'htSelectionDisabled');\n        this.eventManager.addEventListener(TD, 'mouseenter', function () {\n          return hot.deselectCell();\n        });\n      } else if (isSubMenu(item)) {\n        addClass(TD, 'htSubmenu');\n        if (itemIsSelectionDisabled(item)) {\n          this.eventManager.addEventListener(TD, 'mouseenter', function () {\n            return hot.deselectCell();\n          });\n        } else {\n          this.eventManager.addEventListener(TD, 'mouseenter', function () {\n            return hot.selectCell(row, col, void 0, void 0, false, false);\n          });\n        }\n      } else {\n        removeClass(TD, ['htSubmenu', 'htDisabled']);\n        if (itemIsSelectionDisabled(item)) {\n          this.eventManager.addEventListener(TD, 'mouseenter', function () {\n            return hot.deselectCell();\n          });\n        } else {\n          this.eventManager.addEventListener(TD, 'mouseenter', function () {\n            return hot.selectCell(row, col, void 0, void 0, false, false);\n          });\n        }\n      }\n    }\n\n    /**\n     * Create container/wrapper for handsontable.\n     *\n     * @private\n     * @param {string} [name] Class name.\n     * @returns {HTMLElement}\n     */\n  }, {\n    key: \"createContainer\",\n    value: function createContainer() {\n      var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var doc = this.options.container.ownerDocument;\n      var className = name;\n      var container;\n      if (className) {\n        if (isFunction(className)) {\n          className = className.call(this.hot);\n          if (className === null || isUndefined(className)) {\n            className = '';\n          } else {\n            className = className.toString();\n          }\n        }\n        className = className.replace(/[^A-z0-9]/g, '_');\n        className = \"\".concat(this.options.className, \"Sub_\").concat(className);\n        container = doc.querySelector(\".\".concat(this.options.className, \".\").concat(className));\n      }\n      if (!container) {\n        container = doc.createElement('div');\n        addClass(container, \"htMenu \".concat(this.options.className));\n        if (className) {\n          addClass(container, className);\n        }\n        this.options.container.appendChild(container);\n      }\n      return container;\n    }\n\n    /**\n     * @private\n     */\n  }, {\n    key: \"blockMainTableCallbacks\",\n    value: function blockMainTableCallbacks() {\n      this._afterScrollCallback = function () {};\n      this.hot.addHook('afterScrollVertically', this._afterScrollCallback);\n      this.hot.addHook('afterScrollHorizontally', this._afterScrollCallback);\n    }\n\n    /**\n     * @private\n     */\n  }, {\n    key: \"releaseMainTableCallbacks\",\n    value: function releaseMainTableCallbacks() {\n      if (this._afterScrollCallback) {\n        this.hot.removeHook('afterScrollVertically', this._afterScrollCallback);\n        this.hot.removeHook('afterScrollHorizontally', this._afterScrollCallback);\n        this._afterScrollCallback = null;\n      }\n    }\n\n    /**\n     * On after init listener.\n     *\n     * @private\n     */\n  }, {\n    key: \"onAfterInit\",\n    value: function onAfterInit() {\n      var wtTable = this.hotMenu.view._wt.wtTable;\n      var data = this.hotMenu.getSettings().data;\n      var hiderStyle = wtTable.hider.style;\n      var holderStyle = wtTable.holder.style;\n      var currentHiderWidth = parseInt(hiderStyle.width, 10);\n      var realHeight = arrayReduce(data, function (accumulator, value) {\n        return accumulator + (value.name === SEPARATOR ? 1 : 26);\n      }, 0);\n\n      // Additional 3px to menu's size because of additional border around its `table.htCore`.\n      holderStyle.width = \"\".concat(currentHiderWidth + 3, \"px\");\n      holderStyle.height = \"\".concat(realHeight + 3, \"px\");\n      hiderStyle.height = holderStyle.height;\n    }\n\n    /**\n     * On after selection listener.\n     *\n     * @param {number} r Selection start row index.\n     * @param {number} c Selection start column index.\n     * @param {number} r2 Selection end row index.\n     * @param {number} c2 Selection end column index.\n     * @param {object} preventScrolling Object with `value` property where its value change will be observed.\n     */\n  }, {\n    key: \"onAfterSelection\",\n    value: function onAfterSelection(r, c, r2, c2, preventScrolling) {\n      if (this.keyEvent === false) {\n        preventScrolling.value = true;\n      }\n    }\n\n    /**\n     * Document mouse down listener.\n     *\n     * @private\n     * @param {Event} event The mouse event object.\n     */\n  }, {\n    key: \"onDocumentMouseDown\",\n    value: function onDocumentMouseDown(event) {\n      if (!this.isOpened()) {\n        return;\n      }\n\n      // Close menu when clicked element is not belongs to menu itself\n      if (this.options.standalone && this.hotMenu && !isChildOf(event.target, this.hotMenu.rootElement)) {\n        this.close(true);\n\n        // Automatically close menu when clicked element is not belongs to menu or submenu (not necessarily to itself)\n      } else if ((this.isAllSubMenusClosed() || this.isSubMenu()) && !isChildOf(event.target, '.htMenu')) {\n        this.close(true);\n      }\n    }\n\n    /**\n     * Document's contextmenu listener.\n     *\n     * @private\n     * @param {MouseEvent} event The mouse event object.\n     */\n  }, {\n    key: \"onDocumentContextMenu\",\n    value: function onDocumentContextMenu(event) {\n      if (!this.isOpened()) {\n        return;\n      }\n      if (hasClass(event.target, 'htCore') && isChildOf(event.target, this.hotMenu.rootElement)) {\n        event.preventDefault();\n      }\n    }\n  }]);\n  return Menu;\n}();\nmixin(Menu, localHooks);\nexport default Menu;","map":{"version":3,"names":["_typeof","obj","Symbol","iterator","constructor","prototype","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","call","Number","Cursor","SEPARATOR","NO_ITEMS","predefinedItems","filterSeparators","hasSubMenu","isDisabled","isItemHidden","isSeparator","isSelectionDisabled","normalizeSelection","Core","EventManager","arrayEach","arrayFilter","arrayReduce","isWindowsOS","isMobileBrowser","isIpadOS","addClass","empty","fastInnerHTML","isChildOf","isInput","removeClass","getParentWindow","hasClass","isRightClick","debounce","isFunction","isUndefined","isDefined","mixin","hasOwnProperty","localHooks","MIN_WIDTH","SHORTCUTS_CONTEXT","SHORTCUTS_GROUP","Menu","hotInstance","options","hot","parent","name","className","keepInViewport","standalone","minWidth","container","rootDocument","documentElement","eventManager","createContainer","hotMenu","hotSubMenus","parentMenu","menuItems","origOutsideClickDeselects","keyEvent","offset","above","below","left","right","_afterScrollCallback","registerEvents","_this","frame","rootWindow","addEventListener","document","event","onDocumentMouseDown","onDocumentContextMenu","setMenuItems","getSelectedItem","hasSelectedItem","getSourceDataAtRow","getSelectedLast","Array","isArray","setOffset","area","isSubMenu","open","_this2","runLocalHooks","removeAttribute","style","display","delayedOpenSubMenu","row","openSubMenu","minWidthOfMenu","noItemsDefined","filteredItems","item","shouldAutoCloseMenu","settings","data","colHeaders","autoColumnSize","autoWrapRow","modifyColWidth","width","autoRowSize","readOnly","editor","copyPaste","maxCols","columns","renderer","TD","col","prop","menuItemRenderer","renderAllRows","fragmentSelection","outsideClickDeselects","disableVisualSelection","layoutDirection","isRtl","afterOnCellMouseOver","coords","isAllSubMenusClosed","rowHeights","afterOnCellContextMenu","preventDefault","close","beforeOnCellMouseUp","isCommandPassive","executeCommand","afterOnCellMouseUp","setTimeout","afterUnlisten","isOpened","listen","getSettings","addHook","onAfterInit","onAfterSelection","init","shortcutManager","getShortcutManager","menuContext","addContext","config","group","menuContextConfig","runOnlyIf","contains","setActiveContextName","addShortcuts","callback","selection","selectNextCell","selectFirstCell","selectPrevCell","selectLastCell","menu","submenu","transformStart","countVisibleRows","blockMainTableCallbacks","closeParent","closeAllSubMenus","releaseMainTableCallbacks","destroy","cell","getCell","dataItem","subMenu","items","setPosition","getBoundingClientRect","closeSubMenu","menus","_this3","getData","menuContainerParentElement","parentNode","clearLocalHooks","removeChild","selectedItem","selRanges","getSelectedRange","normalizedSelection","commandDescriptor","isCommand","commandName","disabled","isItemDisabled","cursor","ownerDocument","defaultView","fitsBelow","setPositionBelowCursor","fitsAbove","setPositionAboveCursor","isLtr","setHorizontalPositionForLtr","setHorizontalPositionForRtl","setPositionOnRightOfCursor","fitsOnLeft","setPositionOnLeftOfCursor","fitsOnRight","top","offsetHeight","cellHeight","concat","_this$parentMenu$cont","parentMenuRight","cellWidth","offsetWidth","_this$parentMenu$cont2","parentMenuLeft","selectCell","lastRow","countRows","scrollViewportTo","nextRow","prevRow","_this4","wrapper","createElement","itemToTest","itemIsSeparator","RegExp","test","itemIsDisabled","itemIsSelectionDisabled","disableSelection","itemValue","appendChild","deselectCell","doc","toString","replace","querySelector","removeHook","wtTable","view","_wt","hiderStyle","hider","holderStyle","holder","currentHiderWidth","parseInt","realHeight","accumulator","height","r","c","r2","c2","preventScrolling","rootElement"],"sources":["/home/rstorey/wwwdev/Blucktool/node_modules/handsontable/plugins/contextMenu/menu.mjs"],"sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/web.timers.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.constructor.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.symbol.to-primitive.js\";\nimport \"core-js/modules/es.date.to-primitive.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptors.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport Cursor from \"./cursor.mjs\";\nimport { SEPARATOR, NO_ITEMS, predefinedItems } from \"./predefinedItems.mjs\";\nimport { filterSeparators, hasSubMenu, isDisabled, isItemHidden, isSeparator, isSelectionDisabled, normalizeSelection } from \"./utils.mjs\";\nimport Core from \"../../core.mjs\";\nimport EventManager from \"../../eventManager.mjs\";\nimport { arrayEach, arrayFilter, arrayReduce } from \"../../helpers/array.mjs\";\nimport { isWindowsOS, isMobileBrowser, isIpadOS } from \"../../helpers/browser.mjs\";\nimport { addClass, empty, fastInnerHTML, isChildOf, isInput, removeClass, getParentWindow, hasClass } from \"../../helpers/dom/element.mjs\";\nimport { isRightClick } from \"../../helpers/dom/event.mjs\";\nimport { debounce, isFunction } from \"../../helpers/function.mjs\";\nimport { isUndefined, isDefined } from \"../../helpers/mixed.mjs\";\nimport { mixin, hasOwnProperty } from \"../../helpers/object.mjs\";\nimport localHooks from \"../../mixins/localHooks.mjs\";\nvar MIN_WIDTH = 215;\nvar SHORTCUTS_CONTEXT = 'menu';\nvar SHORTCUTS_GROUP = SHORTCUTS_CONTEXT;\n\n/**\n * @typedef MenuOptions\n * @property {Menu} [parent=null] Instance of {@link Menu}.\n * @property {string} [name=null] Name of the menu.\n * @property {string} [className=''] Custom class name.\n * @property {boolean} [keepInViewport=true] Determine if should be kept in viewport.\n * @property {boolean} [standalone] Enabling closing menu when clicked element is not belongs to menu itself.\n * @property {number} [minWidth=MIN_WIDTH] The minimum width.\n * @property {HTMLElement} [container] The container.\n */\n\n/**\n * @private\n * @class Menu\n */\nvar Menu = /*#__PURE__*/function () {\n  /**\n   * @param {Core} hotInstance Handsontable instance.\n   * @param {MenuOptions} [options] Menu options.\n   */\n  function Menu(hotInstance, options) {\n    _classCallCheck(this, Menu);\n    this.hot = hotInstance;\n    this.options = options || {\n      parent: null,\n      name: null,\n      className: '',\n      keepInViewport: true,\n      standalone: false,\n      minWidth: MIN_WIDTH,\n      container: this.hot.rootDocument.documentElement\n    };\n    this.eventManager = new EventManager(this);\n    this.container = this.createContainer(this.options.name);\n    this.hotMenu = null;\n    this.hotSubMenus = {};\n    this.parentMenu = this.options.parent || null;\n    this.menuItems = null;\n    this.origOutsideClickDeselects = null;\n    this.keyEvent = false;\n    this.offset = {\n      above: 0,\n      below: 0,\n      left: 0,\n      right: 0\n    };\n    this._afterScrollCallback = null;\n    this.registerEvents();\n  }\n\n  /**\n   * Register event listeners.\n   *\n   * @private\n   */\n  _createClass(Menu, [{\n    key: \"registerEvents\",\n    value: function registerEvents() {\n      var _this = this;\n      var frame = this.hot.rootWindow;\n      while (frame) {\n        this.eventManager.addEventListener(frame.document, 'mousedown', function (event) {\n          return _this.onDocumentMouseDown(event);\n        });\n        this.eventManager.addEventListener(frame.document, 'contextmenu', function (event) {\n          return _this.onDocumentContextMenu(event);\n        });\n        frame = getParentWindow(frame);\n      }\n    }\n\n    /**\n     * Set array of objects which defines menu items.\n     *\n     * @param {Array} menuItems Menu items to display.\n     */\n  }, {\n    key: \"setMenuItems\",\n    value: function setMenuItems(menuItems) {\n      this.menuItems = menuItems;\n    }\n\n    /**\n     * Returns currently selected menu item. Returns `null` if no item was selected.\n     *\n     * @returns {object|null}\n     */\n  }, {\n    key: \"getSelectedItem\",\n    value: function getSelectedItem() {\n      return this.hasSelectedItem() ? this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]) : null;\n    }\n\n    /**\n     * Checks if the menu has selected (highlighted) any item from the menu list.\n     *\n     * @returns {boolean}\n     */\n  }, {\n    key: \"hasSelectedItem\",\n    value: function hasSelectedItem() {\n      return Array.isArray(this.hotMenu.getSelectedLast());\n    }\n\n    /**\n     * Set offset menu position for specified area (`above`, `below`, `left` or `right`).\n     *\n     * @param {string} area Specified area name (`above`, `below`, `left` or `right`).\n     * @param {number} offset Offset value.\n     */\n  }, {\n    key: \"setOffset\",\n    value: function setOffset(area) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      this.offset[area] = offset;\n    }\n\n    /**\n     * Check if menu is using as sub-menu.\n     *\n     * @returns {boolean}\n     */\n  }, {\n    key: \"isSubMenu\",\n    value: function isSubMenu() {\n      return this.parentMenu !== null;\n    }\n\n    /**\n     * Open menu.\n     *\n     * @fires Hooks#beforeContextMenuShow\n     * @fires Hooks#afterContextMenuShow\n     */\n  }, {\n    key: \"open\",\n    value: function open() {\n      var _this2 = this;\n      this.runLocalHooks('beforeOpen');\n      this.container.removeAttribute('style');\n      this.container.style.display = 'block';\n      var delayedOpenSubMenu = debounce(function (row) {\n        return _this2.openSubMenu(row);\n      }, 300);\n      var minWidthOfMenu = this.options.minWidth || MIN_WIDTH;\n      var noItemsDefined = false;\n      var filteredItems = arrayFilter(this.menuItems, function (item) {\n        if (item.key === NO_ITEMS) {\n          noItemsDefined = true;\n        }\n        return isItemHidden(item, _this2.hot);\n      });\n      if (filteredItems.length < 1 && !noItemsDefined) {\n        filteredItems.push(predefinedItems()[NO_ITEMS]);\n      } else if (filteredItems.length === 0) {\n        return;\n      }\n      filteredItems = filterSeparators(filteredItems, SEPARATOR);\n      var shouldAutoCloseMenu = false;\n      var settings = {\n        data: filteredItems,\n        colHeaders: false,\n        autoColumnSize: true,\n        autoWrapRow: false,\n        modifyColWidth: function modifyColWidth(width) {\n          if (isDefined(width) && width < minWidthOfMenu) {\n            return minWidthOfMenu;\n          }\n          return width;\n        },\n        autoRowSize: false,\n        readOnly: true,\n        editor: false,\n        copyPaste: false,\n        maxCols: 1,\n        columns: [{\n          data: 'name',\n          renderer: function renderer(hot, TD, row, col, prop, value) {\n            return _this2.menuItemRenderer(hot, TD, row, col, prop, value);\n          }\n        }],\n        renderAllRows: true,\n        fragmentSelection: false,\n        outsideClickDeselects: false,\n        disableVisualSelection: 'area',\n        layoutDirection: this.hot.isRtl() ? 'rtl' : 'ltr',\n        afterOnCellMouseOver: function afterOnCellMouseOver(event, coords) {\n          if (_this2.isAllSubMenusClosed()) {\n            delayedOpenSubMenu(coords.row);\n          } else {\n            _this2.openSubMenu(coords.row);\n          }\n        },\n        rowHeights: function rowHeights(row) {\n          return filteredItems[row].name === SEPARATOR ? 1 : 23;\n        },\n        afterOnCellContextMenu: function afterOnCellContextMenu(event) {\n          event.preventDefault();\n\n          // On the Windows platform, the \"contextmenu\" is triggered after the \"mouseup\" so that's\n          // why the closing menu is here. (#6507#issuecomment-582392301).\n          if (isWindowsOS() && shouldAutoCloseMenu && _this2.hasSelectedItem()) {\n            _this2.close(true);\n          }\n        },\n        beforeOnCellMouseUp: function beforeOnCellMouseUp(event) {\n          if (_this2.hasSelectedItem()) {\n            shouldAutoCloseMenu = !_this2.isCommandPassive(_this2.getSelectedItem());\n            _this2.executeCommand(event);\n          }\n        },\n        afterOnCellMouseUp: function afterOnCellMouseUp(event) {\n          // If the code runs on the other platform than Windows, the \"mouseup\" is triggered\n          // after the \"contextmenu\". So then \"mouseup\" closes the menu. Otherwise, the closing\n          // menu responsibility is forwarded to \"afterOnCellContextMenu\" callback (#6507#issuecomment-582392301).\n          if ((!isWindowsOS() || !isRightClick(event)) && shouldAutoCloseMenu && _this2.hasSelectedItem()) {\n            // The timeout is necessary only for mobile devices. For desktop, the click event that is fired\n            // right after the mouseup event gets the event element target the same as the mouseup event.\n            // For mobile devices, the click event is triggered with native delay (~300ms), so when the mouseup\n            // event hides the tapped element, the click event grabs the element below. As a result, the filter\n            // by condition menu is closed and immediately open on tapping the \"None\" item.\n            if (isMobileBrowser() || isIpadOS()) {\n              setTimeout(function () {\n                return _this2.close(true);\n              }, 325);\n            } else {\n              _this2.close(true);\n            }\n          }\n        },\n        afterUnlisten: function afterUnlisten() {\n          // Restore menu focus, fix for `this.instance.unlisten();` call in the tableView.js@260 file.\n          // This prevents losing table responsiveness for keyboard events when filter select menu is closed (#6497).\n          if (!_this2.hasSelectedItem() && _this2.isOpened()) {\n            _this2.hotMenu.listen();\n          }\n        }\n      };\n      this.origOutsideClickDeselects = this.hot.getSettings().outsideClickDeselects;\n      this.hot.getSettings().outsideClickDeselects = false;\n      this.hotMenu = new Core(this.container, settings);\n      this.hotMenu.addHook('afterInit', function () {\n        return _this2.onAfterInit();\n      });\n      this.hotMenu.addHook('afterSelection', function () {\n        return _this2.onAfterSelection.apply(_this2, arguments);\n      });\n      this.hotMenu.init();\n      this.hotMenu.listen();\n      var shortcutManager = this.hotMenu.getShortcutManager();\n      var menuContext = shortcutManager.addContext(SHORTCUTS_GROUP);\n      var config = {\n        group: SHORTCUTS_CONTEXT\n      };\n      var menuContextConfig = _objectSpread(_objectSpread({}, config), {}, {\n        runOnlyIf: function runOnlyIf(event) {\n          return isInput(event.target) === false || _this2.container.contains(event.target) === false;\n        }\n      });\n\n      // Default shortcuts for Handsontable should not be handled. Changing context will help with that.\n      shortcutManager.setActiveContextName('menu');\n      menuContext.addShortcuts([{\n        keys: [['Escape']],\n        callback: function callback() {\n          _this2.keyEvent = true;\n          _this2.close();\n          _this2.keyEvent = false;\n        }\n      }, {\n        keys: [['ArrowDown']],\n        callback: function callback() {\n          var selection = _this2.hotMenu.getSelectedLast();\n          _this2.keyEvent = true;\n          if (selection) {\n            _this2.selectNextCell(selection[0], selection[1]);\n          } else {\n            _this2.selectFirstCell();\n          }\n          _this2.keyEvent = false;\n        }\n      }, {\n        keys: [['ArrowUp']],\n        callback: function callback() {\n          var selection = _this2.hotMenu.getSelectedLast();\n          _this2.keyEvent = true;\n          if (selection) {\n            _this2.selectPrevCell(selection[0], selection[1]);\n          } else {\n            _this2.selectLastCell();\n          }\n          _this2.keyEvent = false;\n        }\n      }, {\n        keys: [['ArrowRight']],\n        callback: function callback() {\n          var selection = _this2.hotMenu.getSelectedLast();\n          _this2.keyEvent = true;\n          if (selection) {\n            var menu = _this2.openSubMenu(selection[0]);\n            if (menu) {\n              menu.selectFirstCell();\n            }\n          }\n          _this2.keyEvent = false;\n        }\n      }, {\n        keys: [['ArrowLeft']],\n        callback: function callback() {\n          var selection = _this2.hotMenu.getSelectedLast();\n          _this2.keyEvent = true;\n          if (selection && _this2.isSubMenu()) {\n            _this2.close();\n            if (_this2.parentMenu) {\n              _this2.parentMenu.hotMenu.listen();\n            }\n          }\n          _this2.keyEvent = false;\n        }\n      }, {\n        keys: [['Enter']],\n        callback: function callback(event) {\n          var selection = _this2.hotMenu.getSelectedLast();\n          _this2.keyEvent = true;\n          if (!_this2.hotMenu.getSourceDataAtRow(selection[0]).submenu) {\n            _this2.executeCommand(event);\n            _this2.close(true);\n          }\n          _this2.keyEvent = false;\n        }\n      }, {\n        keys: [['PageUp']],\n        callback: function callback() {\n          var selection = _this2.hotMenu.getSelectedLast();\n          _this2.keyEvent = true;\n          if (selection) {\n            _this2.hotMenu.selection.transformStart(-_this2.hotMenu.countVisibleRows(), 0);\n          } else {\n            _this2.selectFirstCell();\n          }\n          _this2.keyEvent = false;\n        }\n      }, {\n        keys: [['PageDown']],\n        callback: function callback() {\n          var selection = _this2.hotMenu.getSelectedLast();\n          _this2.keyEvent = true;\n          if (selection) {\n            _this2.hotMenu.selection.transformStart(_this2.hotMenu.countVisibleRows(), 0);\n          } else {\n            _this2.selectLastCell();\n          }\n          _this2.keyEvent = false;\n        }\n      }], menuContextConfig);\n      this.blockMainTableCallbacks();\n      this.runLocalHooks('afterOpen');\n    }\n\n    /**\n     * Close menu.\n     *\n     * @param {boolean} [closeParent=false] If `true` try to close parent menu if exists.\n     */\n  }, {\n    key: \"close\",\n    value: function close() {\n      var closeParent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!this.isOpened()) {\n        return;\n      }\n      if (closeParent && this.parentMenu) {\n        this.parentMenu.close();\n      } else {\n        this.closeAllSubMenus();\n        this.container.style.display = 'none';\n        this.releaseMainTableCallbacks();\n        this.hotMenu.destroy();\n        this.hotMenu = null;\n        this.hot.getSettings().outsideClickDeselects = this.origOutsideClickDeselects;\n        this.runLocalHooks('afterClose');\n        if (this.parentMenu) {\n          this.parentMenu.hotMenu.listen();\n        }\n      }\n    }\n\n    /**\n     * Open sub menu at the provided row index.\n     *\n     * @param {number} row Row index.\n     * @returns {Menu|boolean} Returns created menu or `false` if no one menu was created.\n     */\n  }, {\n    key: \"openSubMenu\",\n    value: function openSubMenu(row) {\n      if (!this.hotMenu) {\n        return false;\n      }\n      var cell = this.hotMenu.getCell(row, 0);\n      this.closeAllSubMenus();\n      if (!cell || !hasSubMenu(cell)) {\n        return false;\n      }\n      var dataItem = this.hotMenu.getSourceDataAtRow(row);\n      var subMenu = new Menu(this.hot, {\n        parent: this,\n        name: dataItem.name,\n        className: this.options.className,\n        keepInViewport: true,\n        container: this.options.container\n      });\n      subMenu.setMenuItems(dataItem.submenu.items);\n      subMenu.open();\n      subMenu.setPosition(cell.getBoundingClientRect());\n      this.hotSubMenus[dataItem.key] = subMenu;\n      return subMenu;\n    }\n\n    /**\n     * Close sub menu at row index.\n     *\n     * @param {number} row Row index.\n     */\n  }, {\n    key: \"closeSubMenu\",\n    value: function closeSubMenu(row) {\n      var dataItem = this.hotMenu.getSourceDataAtRow(row);\n      var menus = this.hotSubMenus[dataItem.key];\n      if (menus) {\n        menus.destroy();\n        delete this.hotSubMenus[dataItem.key];\n      }\n    }\n\n    /**\n     * Close all opened sub menus.\n     */\n  }, {\n    key: \"closeAllSubMenus\",\n    value: function closeAllSubMenus() {\n      var _this3 = this;\n      arrayEach(this.hotMenu.getData(), function (value, row) {\n        return _this3.closeSubMenu(row);\n      });\n    }\n\n    /**\n     * Checks if all created and opened sub menus are closed.\n     *\n     * @returns {boolean}\n     */\n  }, {\n    key: \"isAllSubMenusClosed\",\n    value: function isAllSubMenusClosed() {\n      return Object.keys(this.hotSubMenus).length === 0;\n    }\n\n    /**\n     * Destroy instance.\n     */\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var menuContainerParentElement = this.container.parentNode;\n      this.clearLocalHooks();\n      this.close();\n      this.parentMenu = null;\n      this.eventManager.destroy();\n      if (menuContainerParentElement) {\n        menuContainerParentElement.removeChild(this.container);\n      }\n    }\n\n    /**\n     * Checks if menu was opened.\n     *\n     * @returns {boolean} Returns `true` if menu was opened.\n     */\n  }, {\n    key: \"isOpened\",\n    value: function isOpened() {\n      return this.hotMenu !== null;\n    }\n\n    /**\n     * Execute menu command.\n     *\n     * The `executeCommand()` method works only for selected cells.\n     *\n     * When no cells are selected, `executeCommand()` doesn't do anything.\n     *\n     * @param {Event} [event] The mouse event object.\n     */\n  }, {\n    key: \"executeCommand\",\n    value: function executeCommand(event) {\n      if (!this.isOpened() || !this.hasSelectedItem()) {\n        return;\n      }\n      var selectedItem = this.getSelectedItem();\n      this.runLocalHooks('select', selectedItem, event);\n      if (this.isCommandPassive(selectedItem)) {\n        return;\n      }\n      var selRanges = this.hot.getSelectedRange();\n      var normalizedSelection = selRanges ? normalizeSelection(selRanges) : [];\n      this.runLocalHooks('executeCommand', selectedItem.key, normalizedSelection, event);\n      if (this.isSubMenu()) {\n        this.parentMenu.runLocalHooks('executeCommand', selectedItem.key, normalizedSelection, event);\n      }\n    }\n\n    /**\n     * Checks if the passed command is passive or not. The command is passive when it's marked as\n     * disabled, the descriptor object contains `isCommand` property set to `false`, command\n     * is a separator, or the item is recognized as submenu. For passive items the menu is not\n     * closed automatically after the user trigger the command through the UI.\n     *\n     * @param {object} commandDescriptor Selected menu item from the menu data source.\n     * @returns {boolean}\n     */\n  }, {\n    key: \"isCommandPassive\",\n    value: function isCommandPassive(commandDescriptor) {\n      var isCommand = commandDescriptor.isCommand,\n        commandName = commandDescriptor.name,\n        disabled = commandDescriptor.disabled,\n        submenu = commandDescriptor.submenu;\n      var isItemDisabled = disabled === true || typeof disabled === 'function' && disabled.call(this.hot) === true;\n      return isCommand === false || commandName === SEPARATOR || isItemDisabled === true || submenu;\n    }\n\n    /**\n     * Set menu position based on dom event or based on literal object.\n     *\n     * @param {Event|object} coords Event or literal Object with coordinates.\n     */\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(coords) {\n      var cursor = new Cursor(coords, this.container.ownerDocument.defaultView);\n      if (this.options.keepInViewport) {\n        if (cursor.fitsBelow(this.container)) {\n          this.setPositionBelowCursor(cursor);\n        } else if (cursor.fitsAbove(this.container)) {\n          this.setPositionAboveCursor(cursor);\n        } else {\n          this.setPositionBelowCursor(cursor);\n        }\n        if (this.hot.isLtr()) {\n          this.setHorizontalPositionForLtr(cursor);\n        } else {\n          this.setHorizontalPositionForRtl(cursor);\n        }\n      } else {\n        this.setPositionBelowCursor(cursor);\n        this.setPositionOnRightOfCursor(cursor);\n      }\n    }\n\n    /**\n     * Set menu horizontal position for RTL mode.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n  }, {\n    key: \"setHorizontalPositionForRtl\",\n    value: function setHorizontalPositionForRtl(cursor) {\n      if (cursor.fitsOnLeft(this.container)) {\n        this.setPositionOnLeftOfCursor(cursor);\n      } else {\n        this.setPositionOnRightOfCursor(cursor);\n      }\n    }\n\n    /**\n     * Set menu horizontal position for LTR mode.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n  }, {\n    key: \"setHorizontalPositionForLtr\",\n    value: function setHorizontalPositionForLtr(cursor) {\n      if (cursor.fitsOnRight(this.container)) {\n        this.setPositionOnRightOfCursor(cursor);\n      } else {\n        this.setPositionOnLeftOfCursor(cursor);\n      }\n    }\n\n    /**\n     * Set menu position above cursor object.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n  }, {\n    key: \"setPositionAboveCursor\",\n    value: function setPositionAboveCursor(cursor) {\n      var top = this.offset.above + cursor.top - this.container.offsetHeight;\n      if (this.isSubMenu()) {\n        top = cursor.top + cursor.cellHeight - this.container.offsetHeight + 3;\n      }\n      this.container.style.top = \"\".concat(top, \"px\");\n    }\n\n    /**\n     * Set menu position below cursor object.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n  }, {\n    key: \"setPositionBelowCursor\",\n    value: function setPositionBelowCursor(cursor) {\n      var top = this.offset.below + cursor.top + 1;\n      if (this.isSubMenu()) {\n        top = cursor.top - 1;\n      }\n      this.container.style.top = \"\".concat(top, \"px\");\n    }\n\n    /**\n     * Set menu position on the right of cursor object.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n  }, {\n    key: \"setPositionOnRightOfCursor\",\n    value: function setPositionOnRightOfCursor(cursor) {\n      var left = cursor.left;\n      if (this.isSubMenu()) {\n        var _this$parentMenu$cont = this.parentMenu.container.getBoundingClientRect(),\n          parentMenuRight = _this$parentMenu$cont.right;\n\n        // move the sub menu by the width of the parent's border (usually by 1-2 pixels)\n        left += cursor.cellWidth + parentMenuRight - (cursor.left + cursor.cellWidth);\n      } else {\n        left += this.offset.right;\n      }\n      this.container.style.left = \"\".concat(left, \"px\");\n    }\n\n    /**\n     * Set menu position on the left of cursor object.\n     *\n     * @param {Cursor} cursor `Cursor` object.\n     */\n  }, {\n    key: \"setPositionOnLeftOfCursor\",\n    value: function setPositionOnLeftOfCursor(cursor) {\n      var left = this.offset.left + cursor.left - this.container.offsetWidth;\n      if (this.isSubMenu()) {\n        var _this$parentMenu$cont2 = this.parentMenu.container.getBoundingClientRect(),\n          parentMenuLeft = _this$parentMenu$cont2.left;\n\n        // move the sub menu by the width of the parent's border (usually by 1-2 pixels)\n        left -= cursor.left - parentMenuLeft;\n      }\n      this.container.style.left = \"\".concat(left, \"px\");\n    }\n\n    /**\n     * Select first cell in opened menu.\n     */\n  }, {\n    key: \"selectFirstCell\",\n    value: function selectFirstCell() {\n      var cell = this.hotMenu.getCell(0, 0);\n      if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n        this.selectNextCell(0, 0);\n      } else {\n        this.hotMenu.selectCell(0, 0);\n      }\n    }\n\n    /**\n     * Select last cell in opened menu.\n     */\n  }, {\n    key: \"selectLastCell\",\n    value: function selectLastCell() {\n      var lastRow = this.hotMenu.countRows() - 1;\n      var cell = this.hotMenu.getCell(lastRow, 0);\n      if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n        this.selectPrevCell(lastRow, 0);\n      } else {\n        // disable default \"scroll-to-cell\" option and instead of that...\n        this.hotMenu.selectCell(lastRow, 0, undefined, undefined, false);\n        // ...scroll to the cell with \"snap to the bottom\" option\n        this.hotMenu.scrollViewportTo(lastRow, 0, true, false);\n      }\n    }\n\n    /**\n     * Select next cell in opened menu.\n     *\n     * @param {number} row Row index.\n     * @param {number} col Column index.\n     */\n  }, {\n    key: \"selectNextCell\",\n    value: function selectNextCell(row, col) {\n      var nextRow = row + 1;\n      var cell = nextRow < this.hotMenu.countRows() ? this.hotMenu.getCell(nextRow, col) : null;\n      if (!cell) {\n        return;\n      }\n      if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n        this.selectNextCell(nextRow, col);\n      } else {\n        this.hotMenu.selectCell(nextRow, col);\n      }\n    }\n\n    /**\n     * Select previous cell in opened menu.\n     *\n     * @param {number} row Row index.\n     * @param {number} col Column index.\n     */\n  }, {\n    key: \"selectPrevCell\",\n    value: function selectPrevCell(row, col) {\n      var prevRow = row - 1;\n      var cell = prevRow >= 0 ? this.hotMenu.getCell(prevRow, col) : null;\n      if (!cell) {\n        return;\n      }\n      if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n        this.selectPrevCell(prevRow, col);\n      } else {\n        this.hotMenu.selectCell(prevRow, col);\n      }\n    }\n\n    /**\n     * Menu item renderer.\n     *\n     * @private\n     * @param {Core} hot The Handsontable instance.\n     * @param {HTMLCellElement} TD The rendered cell element.\n     * @param {number} row The visual index.\n     * @param {number} col The visual index.\n     * @param {string} prop The column property if used.\n     * @param {string} value The cell value.\n     */\n  }, {\n    key: \"menuItemRenderer\",\n    value: function menuItemRenderer(hot, TD, row, col, prop, value) {\n      var _this4 = this;\n      var item = hot.getSourceDataAtRow(row);\n      var wrapper = this.hot.rootDocument.createElement('div');\n      var isSubMenu = function isSubMenu(itemToTest) {\n        return hasOwnProperty(itemToTest, 'submenu');\n      };\n      var itemIsSeparator = function itemIsSeparator(itemToTest) {\n        return new RegExp(SEPARATOR, 'i').test(itemToTest.name);\n      };\n      var itemIsDisabled = function itemIsDisabled(itemToTest) {\n        return itemToTest.disabled === true || typeof itemToTest.disabled === 'function' && itemToTest.disabled.call(_this4.hot) === true;\n      };\n      var itemIsSelectionDisabled = function itemIsSelectionDisabled(itemToTest) {\n        return itemToTest.disableSelection;\n      };\n      var itemValue = value;\n      if (typeof itemValue === 'function') {\n        itemValue = itemValue.call(this.hot);\n      }\n      empty(TD);\n      addClass(wrapper, 'htItemWrapper');\n      TD.appendChild(wrapper);\n      if (itemIsSeparator(item)) {\n        addClass(TD, 'htSeparator');\n      } else if (typeof item.renderer === 'function') {\n        addClass(TD, 'htCustomMenuRenderer');\n        TD.appendChild(item.renderer(hot, wrapper, row, col, prop, itemValue));\n      } else {\n        fastInnerHTML(wrapper, itemValue);\n      }\n      if (itemIsDisabled(item)) {\n        addClass(TD, 'htDisabled');\n        this.eventManager.addEventListener(TD, 'mouseenter', function () {\n          return hot.deselectCell();\n        });\n      } else if (itemIsSelectionDisabled(item)) {\n        addClass(TD, 'htSelectionDisabled');\n        this.eventManager.addEventListener(TD, 'mouseenter', function () {\n          return hot.deselectCell();\n        });\n      } else if (isSubMenu(item)) {\n        addClass(TD, 'htSubmenu');\n        if (itemIsSelectionDisabled(item)) {\n          this.eventManager.addEventListener(TD, 'mouseenter', function () {\n            return hot.deselectCell();\n          });\n        } else {\n          this.eventManager.addEventListener(TD, 'mouseenter', function () {\n            return hot.selectCell(row, col, void 0, void 0, false, false);\n          });\n        }\n      } else {\n        removeClass(TD, ['htSubmenu', 'htDisabled']);\n        if (itemIsSelectionDisabled(item)) {\n          this.eventManager.addEventListener(TD, 'mouseenter', function () {\n            return hot.deselectCell();\n          });\n        } else {\n          this.eventManager.addEventListener(TD, 'mouseenter', function () {\n            return hot.selectCell(row, col, void 0, void 0, false, false);\n          });\n        }\n      }\n    }\n\n    /**\n     * Create container/wrapper for handsontable.\n     *\n     * @private\n     * @param {string} [name] Class name.\n     * @returns {HTMLElement}\n     */\n  }, {\n    key: \"createContainer\",\n    value: function createContainer() {\n      var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var doc = this.options.container.ownerDocument;\n      var className = name;\n      var container;\n      if (className) {\n        if (isFunction(className)) {\n          className = className.call(this.hot);\n          if (className === null || isUndefined(className)) {\n            className = '';\n          } else {\n            className = className.toString();\n          }\n        }\n        className = className.replace(/[^A-z0-9]/g, '_');\n        className = \"\".concat(this.options.className, \"Sub_\").concat(className);\n        container = doc.querySelector(\".\".concat(this.options.className, \".\").concat(className));\n      }\n      if (!container) {\n        container = doc.createElement('div');\n        addClass(container, \"htMenu \".concat(this.options.className));\n        if (className) {\n          addClass(container, className);\n        }\n        this.options.container.appendChild(container);\n      }\n      return container;\n    }\n\n    /**\n     * @private\n     */\n  }, {\n    key: \"blockMainTableCallbacks\",\n    value: function blockMainTableCallbacks() {\n      this._afterScrollCallback = function () {};\n      this.hot.addHook('afterScrollVertically', this._afterScrollCallback);\n      this.hot.addHook('afterScrollHorizontally', this._afterScrollCallback);\n    }\n\n    /**\n     * @private\n     */\n  }, {\n    key: \"releaseMainTableCallbacks\",\n    value: function releaseMainTableCallbacks() {\n      if (this._afterScrollCallback) {\n        this.hot.removeHook('afterScrollVertically', this._afterScrollCallback);\n        this.hot.removeHook('afterScrollHorizontally', this._afterScrollCallback);\n        this._afterScrollCallback = null;\n      }\n    }\n\n    /**\n     * On after init listener.\n     *\n     * @private\n     */\n  }, {\n    key: \"onAfterInit\",\n    value: function onAfterInit() {\n      var wtTable = this.hotMenu.view._wt.wtTable;\n      var data = this.hotMenu.getSettings().data;\n      var hiderStyle = wtTable.hider.style;\n      var holderStyle = wtTable.holder.style;\n      var currentHiderWidth = parseInt(hiderStyle.width, 10);\n      var realHeight = arrayReduce(data, function (accumulator, value) {\n        return accumulator + (value.name === SEPARATOR ? 1 : 26);\n      }, 0);\n\n      // Additional 3px to menu's size because of additional border around its `table.htCore`.\n      holderStyle.width = \"\".concat(currentHiderWidth + 3, \"px\");\n      holderStyle.height = \"\".concat(realHeight + 3, \"px\");\n      hiderStyle.height = holderStyle.height;\n    }\n\n    /**\n     * On after selection listener.\n     *\n     * @param {number} r Selection start row index.\n     * @param {number} c Selection start column index.\n     * @param {number} r2 Selection end row index.\n     * @param {number} c2 Selection end column index.\n     * @param {object} preventScrolling Object with `value` property where its value change will be observed.\n     */\n  }, {\n    key: \"onAfterSelection\",\n    value: function onAfterSelection(r, c, r2, c2, preventScrolling) {\n      if (this.keyEvent === false) {\n        preventScrolling.value = true;\n      }\n    }\n\n    /**\n     * Document mouse down listener.\n     *\n     * @private\n     * @param {Event} event The mouse event object.\n     */\n  }, {\n    key: \"onDocumentMouseDown\",\n    value: function onDocumentMouseDown(event) {\n      if (!this.isOpened()) {\n        return;\n      }\n\n      // Close menu when clicked element is not belongs to menu itself\n      if (this.options.standalone && this.hotMenu && !isChildOf(event.target, this.hotMenu.rootElement)) {\n        this.close(true);\n\n        // Automatically close menu when clicked element is not belongs to menu or submenu (not necessarily to itself)\n      } else if ((this.isAllSubMenusClosed() || this.isSubMenu()) && !isChildOf(event.target, '.htMenu')) {\n        this.close(true);\n      }\n    }\n\n    /**\n     * Document's contextmenu listener.\n     *\n     * @private\n     * @param {MouseEvent} event The mouse event object.\n     */\n  }, {\n    key: \"onDocumentContextMenu\",\n    value: function onDocumentContextMenu(event) {\n      if (!this.isOpened()) {\n        return;\n      }\n      if (hasClass(event.target, 'htCore') && isChildOf(event.target, this.hotMenu.rootElement)) {\n        event.preventDefault();\n      }\n    }\n  }]);\n  return Menu;\n}();\nmixin(Menu, localHooks);\nexport default Menu;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}