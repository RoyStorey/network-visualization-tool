{"ast":null,"code":"/**\n * Utility to register editors and common namespace for keeping reference to all editor classes.\n */\nimport Hooks from \"../pluginHooks.mjs\";\nimport staticRegister from \"../utils/staticRegister.mjs\";\nvar registeredEditorClasses = new WeakMap();\nvar _staticRegister = staticRegister('editors'),\n  register = _staticRegister.register,\n  getItem = _staticRegister.getItem,\n  hasItem = _staticRegister.hasItem,\n  getNames = _staticRegister.getNames,\n  getValues = _staticRegister.getValues;\n\n/**\n * @param {BaseEditor} editorClass The editor constructor.\n */\nexport function RegisteredEditor(editorClass) {\n  var instances = {};\n  var Clazz = editorClass;\n  this.getConstructor = function () {\n    return editorClass;\n  };\n  this.getInstance = function (hotInstance) {\n    if (!(hotInstance.guid in instances)) {\n      instances[hotInstance.guid] = new Clazz(hotInstance);\n    }\n    return instances[hotInstance.guid];\n  };\n  Hooks.getSingleton().add('afterDestroy', function () {\n    instances[this.guid] = null;\n  });\n}\n\n/**\n * Returns instance (singleton) of editor class.\n *\n * @param {string} name Name of an editor under which it has been stored.\n * @param {object} hotInstance Instance of Handsontable.\n * @returns {Function} Returns instance of editor.\n */\nexport function _getEditorInstance(name, hotInstance) {\n  var editor;\n  if (typeof name === 'function') {\n    if (!registeredEditorClasses.get(name)) {\n      _register(null, name);\n    }\n    editor = registeredEditorClasses.get(name);\n  } else if (typeof name === 'string') {\n    editor = getItem(name);\n  } else {\n    throw Error('Only strings and functions can be passed as \"editor\" parameter');\n  }\n  if (!editor) {\n    throw Error(\"No editor registered under name \\\"\".concat(name, \"\\\"\"));\n  }\n  return editor.getInstance(hotInstance);\n}\n\n/**\n * Retrieve editor class.\n *\n * @param {string} name Editor identification.\n * @returns {Function} Returns editor class.\n */\nfunction _getItem(name) {\n  if (typeof name === 'function') {\n    return name;\n  }\n  if (!hasItem(name)) {\n    throw Error(\"No registered editor found under \\\"\".concat(name, \"\\\" name\"));\n  }\n  return getItem(name).getConstructor();\n}\n\n/**\n * Register editor class under specified name.\n *\n * @param {string} name Editor identification.\n * @param {Function} editorClass Editor class.\n */\nfunction _register(name, editorClass) {\n  if (name && typeof name !== 'string') {\n    editorClass = name;\n    name = editorClass.EDITOR_TYPE;\n  }\n  var editorWrapper = new RegisteredEditor(editorClass);\n  if (typeof name === 'string') {\n    register(name, editorWrapper);\n  }\n  registeredEditorClasses.set(editorClass, editorWrapper);\n}\nexport { _register as registerEditor, _getItem as getEditor, _getEditorInstance as getEditorInstance, hasItem as hasEditor, getNames as getRegisteredEditorNames, getValues as getRegisteredEditors };","map":{"version":3,"names":["Hooks","staticRegister","registeredEditorClasses","WeakMap","_staticRegister","register","getItem","hasItem","getNames","getValues","RegisteredEditor","editorClass","instances","Clazz","getConstructor","getInstance","hotInstance","guid","getSingleton","add","_getEditorInstance","name","editor","get","_register","Error","concat","_getItem","EDITOR_TYPE","editorWrapper","set","registerEditor","getEditor","getEditorInstance","hasEditor","getRegisteredEditorNames","getRegisteredEditors"],"sources":["/home/rstorey/wwwdev/Blucktool/node_modules/handsontable/editors/registry.mjs"],"sourcesContent":["import \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.weak-map.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n/**\n * Utility to register editors and common namespace for keeping reference to all editor classes.\n */\nimport Hooks from \"../pluginHooks.mjs\";\nimport staticRegister from \"../utils/staticRegister.mjs\";\nvar registeredEditorClasses = new WeakMap();\nvar _staticRegister = staticRegister('editors'),\n  register = _staticRegister.register,\n  getItem = _staticRegister.getItem,\n  hasItem = _staticRegister.hasItem,\n  getNames = _staticRegister.getNames,\n  getValues = _staticRegister.getValues;\n\n/**\n * @param {BaseEditor} editorClass The editor constructor.\n */\nexport function RegisteredEditor(editorClass) {\n  var instances = {};\n  var Clazz = editorClass;\n  this.getConstructor = function () {\n    return editorClass;\n  };\n  this.getInstance = function (hotInstance) {\n    if (!(hotInstance.guid in instances)) {\n      instances[hotInstance.guid] = new Clazz(hotInstance);\n    }\n    return instances[hotInstance.guid];\n  };\n  Hooks.getSingleton().add('afterDestroy', function () {\n    instances[this.guid] = null;\n  });\n}\n\n/**\n * Returns instance (singleton) of editor class.\n *\n * @param {string} name Name of an editor under which it has been stored.\n * @param {object} hotInstance Instance of Handsontable.\n * @returns {Function} Returns instance of editor.\n */\nexport function _getEditorInstance(name, hotInstance) {\n  var editor;\n  if (typeof name === 'function') {\n    if (!registeredEditorClasses.get(name)) {\n      _register(null, name);\n    }\n    editor = registeredEditorClasses.get(name);\n  } else if (typeof name === 'string') {\n    editor = getItem(name);\n  } else {\n    throw Error('Only strings and functions can be passed as \"editor\" parameter');\n  }\n  if (!editor) {\n    throw Error(\"No editor registered under name \\\"\".concat(name, \"\\\"\"));\n  }\n  return editor.getInstance(hotInstance);\n}\n\n/**\n * Retrieve editor class.\n *\n * @param {string} name Editor identification.\n * @returns {Function} Returns editor class.\n */\nfunction _getItem(name) {\n  if (typeof name === 'function') {\n    return name;\n  }\n  if (!hasItem(name)) {\n    throw Error(\"No registered editor found under \\\"\".concat(name, \"\\\" name\"));\n  }\n  return getItem(name).getConstructor();\n}\n\n/**\n * Register editor class under specified name.\n *\n * @param {string} name Editor identification.\n * @param {Function} editorClass Editor class.\n */\nfunction _register(name, editorClass) {\n  if (name && typeof name !== 'string') {\n    editorClass = name;\n    name = editorClass.EDITOR_TYPE;\n  }\n  var editorWrapper = new RegisteredEditor(editorClass);\n  if (typeof name === 'string') {\n    register(name, editorWrapper);\n  }\n  registeredEditorClasses.set(editorClass, editorWrapper);\n}\nexport { _register as registerEditor, _getItem as getEditor, _getEditorInstance as getEditorInstance, hasItem as hasEditor, getNames as getRegisteredEditorNames, getValues as getRegisteredEditors };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}