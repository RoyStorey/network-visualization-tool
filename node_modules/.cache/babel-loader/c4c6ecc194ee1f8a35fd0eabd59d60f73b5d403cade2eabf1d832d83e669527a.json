{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nimport { addClass, hasClass, removeClass, getComputedStyle, getTrimmingContainer, innerWidth, innerHeight, offset, outerHeight, outerWidth } from \"../../../helpers/dom/element.mjs\";\nimport { stopImmediatePropagation } from \"../../../helpers/dom/event.mjs\";\nimport { objectEach } from \"../../../helpers/object.mjs\";\nimport { isMobileBrowser } from \"../../../helpers/browser.mjs\";\n/**\n *\n */\nvar Border = /*#__PURE__*/function () {\n  // TODO As this is an internal class, should be designed for using {Walkontable}. It uses the facade,\n  // TODO Con. Because the class is created on place where the instance reference comes from external origin.\n  // TODO Imho, the discrimination for handling both, facade and non-facade should be handled.\n  /**\n   * @param {WalkontableFacade} wotInstance The Walkontable instance.\n   * @param {object} settings The border settings.\n   */\n  function Border(wotInstance, settings) {\n    _classCallCheck(this, Border);\n    if (!settings) {\n      return;\n    }\n    this.eventManager = wotInstance.eventManager;\n    this.instance = wotInstance;\n    this.wot = wotInstance;\n    this.settings = settings;\n    this.mouseDown = false;\n    this.main = null;\n    this.top = null;\n    this.bottom = null;\n    this.start = null;\n    this.end = null;\n    this.topStyle = null;\n    this.bottomStyle = null;\n    this.startStyle = null;\n    this.endStyle = null;\n    this.cornerDefaultStyle = {\n      width: '6px',\n      height: '6px',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: '#FFF'\n    };\n    // Offset to moving the corner to be centered relative to the grid.\n    this.cornerCenterPointOffset = -(parseInt(this.cornerDefaultStyle.width, 10) / 2);\n    this.corner = null;\n    this.cornerStyle = null;\n    this.createBorders(settings);\n    this.registerListeners();\n  }\n\n  /**\n   * Register all necessary events.\n   */\n  _createClass(Border, [{\n    key: \"registerListeners\",\n    value: function registerListeners() {\n      var _this2 = this;\n      var documentBody = this.wot.rootDocument.body;\n      this.eventManager.addEventListener(documentBody, 'mousedown', function () {\n        return _this2.onMouseDown();\n      });\n      this.eventManager.addEventListener(documentBody, 'mouseup', function () {\n        return _this2.onMouseUp();\n      });\n      var _loop = function _loop(c) {\n        var element = _this2.main.childNodes[c];\n        _this2.eventManager.addEventListener(element, 'mouseenter', function (event) {\n          return _this2.onMouseEnter(event, _this2.main.childNodes[c]);\n        });\n      };\n      for (var c = 0, len = this.main.childNodes.length; c < len; c++) {\n        _loop(c);\n      }\n    }\n\n    /**\n     * Mouse down listener.\n     *\n     * @private\n     */\n  }, {\n    key: \"onMouseDown\",\n    value: function onMouseDown() {\n      this.mouseDown = true;\n    }\n\n    /**\n     * Mouse up listener.\n     *\n     * @private\n     */\n  }, {\n    key: \"onMouseUp\",\n    value: function onMouseUp() {\n      this.mouseDown = false;\n    }\n\n    /**\n     * Mouse enter listener for fragment selection functionality.\n     *\n     * @private\n     * @param {Event} event Dom event.\n     * @param {HTMLElement} parentElement Part of border element.\n     */\n  }, {\n    key: \"onMouseEnter\",\n    value: function onMouseEnter(event, parentElement) {\n      if (!this.mouseDown || !this.wot.getSetting('hideBorderOnMouseDownOver')) {\n        return;\n      }\n      event.preventDefault();\n      stopImmediatePropagation(event);\n      var _this = this;\n      var documentBody = this.wot.rootDocument.body;\n      var bounds = parentElement.getBoundingClientRect();\n\n      // Hide border to prevents selection jumping when fragmentSelection is enabled.\n      parentElement.style.display = 'none';\n\n      /**\n       * @param {Event} mouseEvent The mouse event object.\n       * @returns {boolean}\n       */\n      function isOutside(mouseEvent) {\n        if (mouseEvent.clientY < Math.floor(bounds.top)) {\n          return true;\n        }\n        if (mouseEvent.clientY > Math.ceil(bounds.top + bounds.height)) {\n          return true;\n        }\n        if (mouseEvent.clientX < Math.floor(bounds.left)) {\n          return true;\n        }\n        if (mouseEvent.clientX > Math.ceil(bounds.left + bounds.width)) {\n          return true;\n        }\n      }\n\n      /**\n       * @param {Event} handlerEvent The mouse event object.\n       */\n      function handler(handlerEvent) {\n        if (isOutside(handlerEvent)) {\n          _this.eventManager.removeEventListener(documentBody, 'mousemove', handler);\n          parentElement.style.display = 'block';\n        }\n      }\n      this.eventManager.addEventListener(documentBody, 'mousemove', handler);\n    }\n\n    /**\n     * Create border elements.\n     *\n     * @param {object} settings The border settings.\n     */\n  }, {\n    key: \"createBorders\",\n    value: function createBorders(settings) {\n      var rootDocument = this.wot.rootDocument;\n      this.main = rootDocument.createElement('div');\n      var borderDivs = ['top', 'start', 'bottom', 'end', 'corner'];\n      var style = this.main.style;\n      style.position = 'absolute';\n      style.top = 0;\n      style.left = 0;\n      for (var i = 0; i < 5; i++) {\n        var position = borderDivs[i];\n        var div = rootDocument.createElement('div');\n        div.className = \"wtBorder \".concat(this.settings.className || ''); // + borderDivs[i];\n\n        if (this.settings[position] && this.settings[position].hide) {\n          div.className += ' hidden';\n        }\n        style = div.style;\n        style.backgroundColor = this.settings[position] && this.settings[position].color ? this.settings[position].color : settings.border.color;\n        style.height = this.settings[position] && this.settings[position].width ? \"\".concat(this.settings[position].width, \"px\") : \"\".concat(settings.border.width, \"px\");\n        style.width = this.settings[position] && this.settings[position].width ? \"\".concat(this.settings[position].width, \"px\") : \"\".concat(settings.border.width, \"px\");\n        this.main.appendChild(div);\n      }\n      this.top = this.main.childNodes[0];\n      this.start = this.main.childNodes[1];\n      this.bottom = this.main.childNodes[2];\n      this.end = this.main.childNodes[3];\n      this.topStyle = this.top.style;\n      this.startStyle = this.start.style;\n      this.bottomStyle = this.bottom.style;\n      this.endStyle = this.end.style;\n      this.corner = this.main.childNodes[4];\n      this.corner.className += ' corner';\n      this.cornerStyle = this.corner.style;\n      this.cornerStyle.width = this.cornerDefaultStyle.width;\n      this.cornerStyle.height = this.cornerDefaultStyle.height;\n      this.cornerStyle.border = [this.cornerDefaultStyle.borderWidth, this.cornerDefaultStyle.borderStyle, this.cornerDefaultStyle.borderColor].join(' ');\n      if (isMobileBrowser()) {\n        this.createMultipleSelectorHandles();\n      }\n      this.disappear();\n      var wtTable = this.wot.wtTable;\n      var bordersHolder = wtTable.bordersHolder;\n      if (!bordersHolder) {\n        bordersHolder = rootDocument.createElement('div');\n        bordersHolder.className = 'htBorders';\n        wtTable.bordersHolder = bordersHolder;\n        wtTable.spreader.appendChild(bordersHolder);\n      }\n      bordersHolder.appendChild(this.main);\n    }\n\n    /**\n     * Create multiple selector handler for mobile devices.\n     */\n  }, {\n    key: \"createMultipleSelectorHandles\",\n    value: function createMultipleSelectorHandles() {\n      var _this3 = this;\n      var rootDocument = this.wot.rootDocument;\n      this.selectionHandles = {\n        top: rootDocument.createElement('DIV'),\n        topHitArea: rootDocument.createElement('DIV'),\n        bottom: rootDocument.createElement('DIV'),\n        bottomHitArea: rootDocument.createElement('DIV')\n      };\n      var width = 10;\n      var hitAreaWidth = 40;\n      this.selectionHandles.top.className = 'topSelectionHandle topLeftSelectionHandle';\n      this.selectionHandles.topHitArea.className = 'topSelectionHandle-HitArea topLeftSelectionHandle-HitArea';\n      this.selectionHandles.bottom.className = 'bottomSelectionHandle bottomRightSelectionHandle';\n      this.selectionHandles.bottomHitArea.className = 'bottomSelectionHandle-HitArea bottomRightSelectionHandle-HitArea';\n      this.selectionHandles.styles = {\n        top: this.selectionHandles.top.style,\n        topHitArea: this.selectionHandles.topHitArea.style,\n        bottom: this.selectionHandles.bottom.style,\n        bottomHitArea: this.selectionHandles.bottomHitArea.style\n      };\n      var hitAreaStyle = {\n        position: 'absolute',\n        height: \"\".concat(hitAreaWidth, \"px\"),\n        width: \"\".concat(hitAreaWidth, \"px\"),\n        'border-radius': \"\".concat(parseInt(hitAreaWidth / 1.5, 10), \"px\")\n      };\n      objectEach(hitAreaStyle, function (value, key) {\n        _this3.selectionHandles.styles.bottomHitArea[key] = value;\n        _this3.selectionHandles.styles.topHitArea[key] = value;\n      });\n      var handleStyle = {\n        position: 'absolute',\n        height: \"\".concat(width, \"px\"),\n        width: \"\".concat(width, \"px\"),\n        'border-radius': \"\".concat(parseInt(width / 1.5, 10), \"px\"),\n        background: '#F5F5FF',\n        border: '1px solid #4285c8'\n      };\n      objectEach(handleStyle, function (value, key) {\n        _this3.selectionHandles.styles.bottom[key] = value;\n        _this3.selectionHandles.styles.top[key] = value;\n      });\n      this.main.appendChild(this.selectionHandles.top);\n      this.main.appendChild(this.selectionHandles.bottom);\n      this.main.appendChild(this.selectionHandles.topHitArea);\n      this.main.appendChild(this.selectionHandles.bottomHitArea);\n    }\n\n    /**\n     * @param {number} row The visual row index.\n     * @param {number} col The visual column index.\n     * @returns {boolean}\n     */\n  }, {\n    key: \"isPartRange\",\n    value: function isPartRange(row, col) {\n      var areaSelection = this.wot.selections.createOrGetArea();\n      if (areaSelection.cellRange) {\n        if (row !== areaSelection.cellRange.to.row || col !== areaSelection.cellRange.to.col) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    /**\n     * @param {number} row The visual row index.\n     * @param {number} col The visual column index.\n     * @param {number} top The top position of the handler.\n     * @param {number} left The left position of the handler.\n     * @param {number} width The width of the handler.\n     * @param {number} height The height of the handler.\n     */\n  }, {\n    key: \"updateMultipleSelectionHandlesPosition\",\n    value: function updateMultipleSelectionHandlesPosition(row, col, top, left, width, height) {\n      var isRtl = this.wot.wtSettings.getSetting('rtlMode');\n      var inlinePosProperty = isRtl ? 'right' : 'left';\n      var _this$selectionHandle = this.selectionHandles.styles,\n        topStyles = _this$selectionHandle.top,\n        topHitAreaStyles = _this$selectionHandle.topHitArea,\n        bottomStyles = _this$selectionHandle.bottom,\n        bottomHitAreaStyles = _this$selectionHandle.bottomHitArea;\n      var handleBorderSize = parseInt(topStyles.borderWidth, 10);\n      var handleSize = parseInt(topStyles.width, 10);\n      var hitAreaSize = parseInt(topHitAreaStyles.width, 10);\n      var totalTableWidth = this.wot.wtTable.getWidth();\n      var totalTableHeight = this.wot.wtTable.getHeight();\n      topStyles.top = \"\".concat(parseInt(top - handleSize - 1, 10), \"px\");\n      topStyles[inlinePosProperty] = \"\".concat(parseInt(left - handleSize - 1, 10), \"px\");\n      topHitAreaStyles.top = \"\".concat(parseInt(top - hitAreaSize / 4 * 3, 10), \"px\");\n      topHitAreaStyles[inlinePosProperty] = \"\".concat(parseInt(left - hitAreaSize / 4 * 3, 10), \"px\");\n      var bottomHandlerInline = Math.min(parseInt(left + width, 10), totalTableWidth - handleSize - handleBorderSize * 2);\n      var bottomHandlerAreaInline = Math.min(parseInt(left + width - hitAreaSize / 4, 10), totalTableWidth - hitAreaSize - handleBorderSize * 2);\n      bottomStyles[inlinePosProperty] = \"\".concat(bottomHandlerInline, \"px\");\n      bottomHitAreaStyles[inlinePosProperty] = \"\".concat(bottomHandlerAreaInline, \"px\");\n      var bottomHandlerTop = Math.min(parseInt(top + height, 10), totalTableHeight - handleSize - handleBorderSize * 2);\n      var bottomHandlerAreaTop = Math.min(parseInt(top + height - hitAreaSize / 4, 10), totalTableHeight - hitAreaSize - handleBorderSize * 2);\n      bottomStyles.top = \"\".concat(bottomHandlerTop, \"px\");\n      bottomHitAreaStyles.top = \"\".concat(bottomHandlerAreaTop, \"px\");\n      if (this.settings.border.cornerVisible && this.settings.border.cornerVisible()) {\n        topStyles.display = 'block';\n        topHitAreaStyles.display = 'block';\n        if (this.isPartRange(row, col)) {\n          bottomStyles.display = 'none';\n          bottomHitAreaStyles.display = 'none';\n        } else {\n          bottomStyles.display = 'block';\n          bottomHitAreaStyles.display = 'block';\n        }\n      } else {\n        topStyles.display = 'none';\n        bottomStyles.display = 'none';\n        topHitAreaStyles.display = 'none';\n        bottomHitAreaStyles.display = 'none';\n      }\n      if (row === this.wot.wtSettings.getSetting('fixedRowsTop') || col === this.wot.wtSettings.getSetting('fixedColumnsStart')) {\n        topStyles.zIndex = '9999';\n        topHitAreaStyles.zIndex = '9999';\n      } else {\n        topStyles.zIndex = '';\n        topHitAreaStyles.zIndex = '';\n      }\n    }\n\n    /**\n     * Show border around one or many cells.\n     *\n     * @param {Array} corners The corner coordinates.\n     */\n  }, {\n    key: \"appear\",\n    value: function appear(corners) {\n      if (this.disabled) {\n        return;\n      }\n      var _this$wot = this.wot,\n        wtTable = _this$wot.wtTable,\n        rootDocument = _this$wot.rootDocument,\n        rootWindow = _this$wot.rootWindow; // todo refactoring: consider about using internal facade (it is given by external code)\n      var fromRow;\n      var toRow;\n      var fromColumn;\n      var toColumn;\n      var rowHeader;\n      var columnHeader;\n      var rowsCount = wtTable.getRenderedRowsCount();\n      for (var i = 0; i < rowsCount; i += 1) {\n        var s = wtTable.rowFilter.renderedToSource(i);\n        if (s >= corners[0] && s <= corners[2]) {\n          fromRow = s;\n          rowHeader = corners[0];\n          break;\n        }\n      }\n      for (var _i = rowsCount - 1; _i >= 0; _i -= 1) {\n        var _s = wtTable.rowFilter.renderedToSource(_i);\n        if (_s >= corners[0] && _s <= corners[2]) {\n          toRow = _s;\n          break;\n        }\n      }\n      var columnsCount = wtTable.getRenderedColumnsCount();\n      for (var _i2 = 0; _i2 < columnsCount; _i2 += 1) {\n        var _s2 = wtTable.columnFilter.renderedToSource(_i2);\n        if (_s2 >= corners[1] && _s2 <= corners[3]) {\n          fromColumn = _s2;\n          columnHeader = corners[1];\n          break;\n        }\n      }\n      for (var _i3 = columnsCount - 1; _i3 >= 0; _i3 -= 1) {\n        var _s3 = wtTable.columnFilter.renderedToSource(_i3);\n        if (_s3 >= corners[1] && _s3 <= corners[3]) {\n          toColumn = _s3;\n          break;\n        }\n      }\n      if (fromRow === void 0 || fromColumn === void 0) {\n        this.disappear();\n        return;\n      }\n      var fromTD = wtTable.getCell(this.wot.createCellCoords(fromRow, fromColumn));\n      var isMultiple = fromRow !== toRow || fromColumn !== toColumn;\n      var toTD = isMultiple ? wtTable.getCell(this.wot.createCellCoords(toRow, toColumn)) : fromTD;\n      var fromOffset = offset(fromTD);\n      var toOffset = isMultiple ? offset(toTD) : fromOffset;\n      var containerOffset = offset(wtTable.TABLE);\n      var containerWidth = outerWidth(wtTable.TABLE);\n      var minTop = fromOffset.top;\n      var minLeft = fromOffset.left;\n      var isRtl = this.wot.wtSettings.getSetting('rtlMode');\n      var inlineStartPos = 0;\n      var width = 0;\n      if (isRtl) {\n        var fromWidth = outerWidth(fromTD);\n        var gridRightPos = rootWindow.innerWidth - containerOffset.left - containerWidth;\n        width = minLeft + fromWidth - toOffset.left;\n        inlineStartPos = rootWindow.innerWidth - minLeft - fromWidth - gridRightPos - 1;\n      } else {\n        width = toOffset.left + outerWidth(toTD) - minLeft;\n        inlineStartPos = minLeft - containerOffset.left - 1;\n      }\n      if (this.isEntireColumnSelected(fromRow, toRow)) {\n        var modifiedValues = this.getDimensionsFromHeader('columns', fromColumn, toColumn, rowHeader, containerOffset);\n        var fromTH = null;\n        if (modifiedValues) {\n          var _modifiedValues = _slicedToArray(modifiedValues, 3);\n          fromTH = _modifiedValues[0];\n          inlineStartPos = _modifiedValues[1];\n          width = _modifiedValues[2];\n        }\n        if (fromTH) {\n          fromTD = fromTH;\n        }\n      }\n      var top = minTop - containerOffset.top - 1;\n      var height = toOffset.top + outerHeight(toTD) - minTop;\n      if (this.isEntireRowSelected(fromColumn, toColumn)) {\n        var _modifiedValues2 = this.getDimensionsFromHeader('rows', fromRow, toRow, columnHeader, containerOffset);\n        var _fromTH = null;\n        if (_modifiedValues2) {\n          var _modifiedValues3 = _slicedToArray(_modifiedValues2, 3);\n          _fromTH = _modifiedValues3[0];\n          top = _modifiedValues3[1];\n          height = _modifiedValues3[2];\n        }\n        if (_fromTH) {\n          fromTD = _fromTH;\n        }\n      }\n      var style = getComputedStyle(fromTD, rootWindow);\n      if (parseInt(style.borderTopWidth, 10) > 0) {\n        top += 1;\n        height = height > 0 ? height - 1 : 0;\n      }\n      if (parseInt(style[isRtl ? 'borderRightWidth' : 'borderLeftWidth'], 10) > 0) {\n        inlineStartPos += 1;\n        width = width > 0 ? width - 1 : 0;\n      }\n      var inlinePosProperty = isRtl ? 'right' : 'left';\n      this.topStyle.top = \"\".concat(top, \"px\");\n      this.topStyle[inlinePosProperty] = \"\".concat(inlineStartPos, \"px\");\n      this.topStyle.width = \"\".concat(width, \"px\");\n      this.topStyle.display = 'block';\n      this.startStyle.top = \"\".concat(top, \"px\");\n      this.startStyle[inlinePosProperty] = \"\".concat(inlineStartPos, \"px\");\n      this.startStyle.height = \"\".concat(height, \"px\");\n      this.startStyle.display = 'block';\n      var delta = Math.floor(this.settings.border.width / 2);\n      this.bottomStyle.top = \"\".concat(top + height - delta, \"px\");\n      this.bottomStyle[inlinePosProperty] = \"\".concat(inlineStartPos, \"px\");\n      this.bottomStyle.width = \"\".concat(width, \"px\");\n      this.bottomStyle.display = 'block';\n      this.endStyle.top = \"\".concat(top, \"px\");\n      this.endStyle[inlinePosProperty] = \"\".concat(inlineStartPos + width - delta, \"px\");\n      this.endStyle.height = \"\".concat(height + 1, \"px\");\n      this.endStyle.display = 'block';\n      var cornerVisibleSetting = this.settings.border.cornerVisible;\n      cornerVisibleSetting = typeof cornerVisibleSetting === 'function' ? cornerVisibleSetting(this.settings.layerLevel) : cornerVisibleSetting;\n      var hookResult = this.wot.getSetting('onModifyGetCellCoords', toRow, toColumn);\n      var checkRow = toRow,\n        checkCol = toColumn;\n      if (hookResult && Array.isArray(hookResult)) {\n        var _hookResult = _slicedToArray(hookResult, 4);\n        checkRow = _hookResult[2];\n        checkCol = _hookResult[3];\n      }\n      if (isMobileBrowser() || !cornerVisibleSetting || this.isPartRange(checkRow, checkCol)) {\n        this.cornerStyle.display = 'none';\n      } else {\n        this.cornerStyle.top = \"\".concat(top + height + this.cornerCenterPointOffset - 1, \"px\");\n        this.cornerStyle[inlinePosProperty] = \"\".concat(inlineStartPos + width + this.cornerCenterPointOffset - 1, \"px\");\n        this.cornerStyle.borderRightWidth = this.cornerDefaultStyle.borderWidth;\n        this.cornerStyle.width = this.cornerDefaultStyle.width;\n\n        // Hide the fill handle, so the possible further adjustments won't force unneeded scrollbars.\n        this.cornerStyle.display = 'none';\n        var trimmingContainer = getTrimmingContainer(wtTable.TABLE);\n        var trimToWindow = trimmingContainer === rootWindow;\n        if (trimToWindow) {\n          trimmingContainer = rootDocument.documentElement;\n        }\n        var cornerHalfWidth = parseInt(this.cornerDefaultStyle.width, 10) / 2;\n        var cornerHalfHeight = parseInt(this.cornerDefaultStyle.height, 10) / 2;\n        if (toColumn === this.wot.getSetting('totalColumns') - 1) {\n          var toTdOffsetLeft = trimToWindow ? toTD.getBoundingClientRect().left : toTD.offsetLeft;\n          var cornerOverlappingContainer = false;\n          var cornerEdge = 0;\n          if (isRtl) {\n            cornerEdge = toTdOffsetLeft - parseInt(this.cornerDefaultStyle.width, 10) / 2;\n            cornerOverlappingContainer = cornerEdge < 0;\n          } else {\n            cornerEdge = toTdOffsetLeft + outerWidth(toTD) + parseInt(this.cornerDefaultStyle.width, 10) / 2;\n            cornerOverlappingContainer = cornerEdge >= innerWidth(trimmingContainer);\n          }\n          if (cornerOverlappingContainer) {\n            this.cornerStyle[inlinePosProperty] = \"\".concat(Math.floor(inlineStartPos + width + this.cornerCenterPointOffset - cornerHalfWidth), \"px\");\n            this.cornerStyle[isRtl ? 'borderLeftWidth' : 'borderRightWidth'] = 0;\n          }\n        }\n        if (toRow === this.wot.getSetting('totalRows') - 1) {\n          var toTdOffsetTop = trimToWindow ? toTD.getBoundingClientRect().top : toTD.offsetTop;\n          var cornerBottomEdge = toTdOffsetTop + outerHeight(toTD) + parseInt(this.cornerDefaultStyle.height, 10) / 2;\n          var _cornerOverlappingContainer = cornerBottomEdge >= innerHeight(trimmingContainer);\n          if (_cornerOverlappingContainer) {\n            this.cornerStyle.top = \"\".concat(Math.floor(top + height + this.cornerCenterPointOffset - cornerHalfHeight), \"px\");\n            this.cornerStyle.borderBottomWidth = 0;\n          }\n        }\n        this.cornerStyle.display = 'block';\n      }\n      if (isMobileBrowser()) {\n        this.updateMultipleSelectionHandlesPosition(toRow, toColumn, top, inlineStartPos, width, height);\n      }\n    }\n\n    /**\n     * Check whether an entire column of cells is selected.\n     *\n     * @private\n     * @param {number} startRowIndex Start row index.\n     * @param {number} endRowIndex End row index.\n     * @returns {boolean}\n     */\n  }, {\n    key: \"isEntireColumnSelected\",\n    value: function isEntireColumnSelected(startRowIndex, endRowIndex) {\n      return startRowIndex === this.wot.wtTable.getFirstRenderedRow() && endRowIndex === this.wot.wtTable.getLastRenderedRow();\n    }\n\n    /**\n     * Check whether an entire row of cells is selected.\n     *\n     * @private\n     * @param {number} startColumnIndex Start column index.\n     * @param {number} endColumnIndex End column index.\n     * @returns {boolean}\n     */\n  }, {\n    key: \"isEntireRowSelected\",\n    value: function isEntireRowSelected(startColumnIndex, endColumnIndex) {\n      return startColumnIndex === this.wot.wtTable.getFirstRenderedColumn() && endColumnIndex === this.wot.wtTable.getLastRenderedColumn();\n    }\n\n    /**\n     * Get left/top index and width/height depending on the `direction` provided.\n     *\n     * @private\n     * @param {string} direction `rows` or `columns`, defines if an entire column or row is selected.\n     * @param {number} fromIndex Start index of the selection.\n     * @param {number} toIndex End index of the selection.\n     * @param {number} headerIndex The header index as negative value.\n     * @param {number} containerOffset Offset of the container.\n     * @returns {Array|boolean} Returns an array of [headerElement, left, width] or [headerElement, top, height], depending on `direction` (`false` in case of an error getting the headers).\n     */\n  }, {\n    key: \"getDimensionsFromHeader\",\n    value: function getDimensionsFromHeader(direction, fromIndex, toIndex, headerIndex, containerOffset) {\n      var wtTable = this.wot.wtTable;\n      var rootHotElement = wtTable.wtRootElement.parentNode;\n      var getHeaderFn = null;\n      var dimensionFn = null;\n      var entireSelectionClassname = null;\n      var index = null;\n      var dimension = null;\n      var dimensionProperty = null;\n      var startHeader = null;\n      var endHeader = null;\n      switch (direction) {\n        case 'rows':\n          getHeaderFn = function getHeaderFn() {\n            return wtTable.getRowHeader.apply(wtTable, arguments);\n          };\n          dimensionFn = function dimensionFn() {\n            return outerHeight.apply(void 0, arguments);\n          };\n          entireSelectionClassname = 'ht__selection--rows';\n          dimensionProperty = 'top';\n          break;\n        case 'columns':\n          getHeaderFn = function getHeaderFn() {\n            return wtTable.getColumnHeader.apply(wtTable, arguments);\n          };\n          dimensionFn = function dimensionFn() {\n            return outerWidth.apply(void 0, arguments);\n          };\n          entireSelectionClassname = 'ht__selection--columns';\n          dimensionProperty = 'left';\n          break;\n        default:\n      }\n      if (rootHotElement.classList.contains(entireSelectionClassname)) {\n        var columnHeaderLevelCount = this.wot.getSetting('columnHeaders').length;\n        startHeader = getHeaderFn(fromIndex, columnHeaderLevelCount - headerIndex);\n        endHeader = getHeaderFn(toIndex, columnHeaderLevelCount - headerIndex);\n        if (!startHeader || !endHeader) {\n          return false;\n        }\n        var startHeaderOffset = offset(startHeader);\n        var endOffset = offset(endHeader);\n        if (startHeader && endHeader) {\n          index = startHeaderOffset[dimensionProperty] - containerOffset[dimensionProperty] - 1;\n          dimension = endOffset[dimensionProperty] + dimensionFn(endHeader) - startHeaderOffset[dimensionProperty];\n        }\n        return [startHeader, index, dimension];\n      }\n      return false;\n    }\n\n    /**\n     * Change border style.\n     *\n     * @private\n     * @param {string} borderElement Coordinate where add/remove border: top, bottom, start, end.\n     * @param {object} border The border object descriptor.\n     */\n  }, {\n    key: \"changeBorderStyle\",\n    value: function changeBorderStyle(borderElement, border) {\n      var style = this[borderElement].style;\n      var borderStyle = border[borderElement];\n      if (!borderStyle || borderStyle.hide) {\n        addClass(this[borderElement], 'hidden');\n      } else {\n        if (hasClass(this[borderElement], 'hidden')) {\n          removeClass(this[borderElement], 'hidden');\n        }\n        style.backgroundColor = borderStyle.color;\n        if (borderElement === 'top' || borderElement === 'bottom') {\n          style.height = \"\".concat(borderStyle.width, \"px\");\n        }\n        if (borderElement === 'start' || borderElement === 'end') {\n          style.width = \"\".concat(borderStyle.width, \"px\");\n        }\n      }\n    }\n\n    /**\n     * Change border style to default.\n     *\n     * @private\n     * @param {string} position The position type (\"top\", \"bottom\", \"start\", \"end\") to change.\n     */\n  }, {\n    key: \"changeBorderToDefaultStyle\",\n    value: function changeBorderToDefaultStyle(position) {\n      var defaultBorder = {\n        width: 1,\n        color: '#000'\n      };\n      var style = this[position].style;\n      style.backgroundColor = defaultBorder.color;\n      style.width = \"\".concat(defaultBorder.width, \"px\");\n      style.height = \"\".concat(defaultBorder.width, \"px\");\n    }\n\n    /**\n     * Toggle class 'hidden' to element.\n     *\n     * @private\n     * @param {string} borderElement Coordinate where add/remove border: top, bottom, start, end.\n     * @param {boolean} [remove] Defines type of the action to perform.\n     */\n  }, {\n    key: \"toggleHiddenClass\",\n    value: function toggleHiddenClass(borderElement, remove) {\n      this.changeBorderToDefaultStyle(borderElement);\n      if (remove) {\n        addClass(this[borderElement], 'hidden');\n      } else {\n        removeClass(this[borderElement], 'hidden');\n      }\n    }\n\n    /**\n     * Hide border.\n     */\n  }, {\n    key: \"disappear\",\n    value: function disappear() {\n      this.topStyle.display = 'none';\n      this.bottomStyle.display = 'none';\n      this.startStyle.display = 'none';\n      this.endStyle.display = 'none';\n      this.cornerStyle.display = 'none';\n      if (isMobileBrowser()) {\n        this.selectionHandles.styles.top.display = 'none';\n        this.selectionHandles.styles.topHitArea.display = 'none';\n        this.selectionHandles.styles.bottom.display = 'none';\n        this.selectionHandles.styles.bottomHitArea.display = 'none';\n      }\n    }\n\n    /**\n     * Cleans up all the DOM state related to a Border instance. Call this prior to deleting a Border instance.\n     */\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.eventManager.destroyWithOwnEventsOnly();\n      this.main.parentNode.removeChild(this.main);\n    }\n  }]);\n  return Border;\n}();\nexport default Border;","map":{"version":3,"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","Object","toString","call","slice","name","Array","from","test","len","length","arr2","_i","_s","_e","_x","_r","_arr","_n","_d","next","done","push","value","err","return","isArray","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","Number","addClass","hasClass","removeClass","getComputedStyle","getTrimmingContainer","innerWidth","innerHeight","offset","outerHeight","outerWidth","stopImmediatePropagation","objectEach","isMobileBrowser","Border","wotInstance","settings","eventManager","wot","mouseDown","main","top","bottom","start","end","topStyle","bottomStyle","startStyle","endStyle","cornerDefaultStyle","width","height","borderWidth","borderStyle","borderColor","cornerCenterPointOffset","parseInt","corner","cornerStyle","createBorders","registerListeners","_this2","documentBody","rootDocument","body","addEventListener","onMouseDown","onMouseUp","_loop","c","element","childNodes","event","onMouseEnter","parentElement","getSetting","preventDefault","_this","bounds","getBoundingClientRect","style","display","isOutside","mouseEvent","clientY","Math","floor","ceil","clientX","left","handler","handlerEvent","removeEventListener","createElement","borderDivs","position","div","className","concat","hide","backgroundColor","color","border","appendChild","join","createMultipleSelectorHandles","disappear","wtTable","bordersHolder","spreader","_this3","selectionHandles","topHitArea","bottomHitArea","hitAreaWidth","styles","hitAreaStyle","handleStyle","background","isPartRange","row","col","areaSelection","selections","createOrGetArea","cellRange","to","updateMultipleSelectionHandlesPosition","isRtl","wtSettings","inlinePosProperty","_this$selectionHandle","topStyles","topHitAreaStyles","bottomStyles","bottomHitAreaStyles","handleBorderSize","handleSize","hitAreaSize","totalTableWidth","getWidth","totalTableHeight","getHeight","bottomHandlerInline","min","bottomHandlerAreaInline","bottomHandlerTop","bottomHandlerAreaTop","cornerVisible","zIndex","appear","corners","disabled","_this$wot","rootWindow","fromRow","toRow","fromColumn","toColumn","rowHeader","columnHeader","rowsCount","getRenderedRowsCount","s","rowFilter","renderedToSource","columnsCount","getRenderedColumnsCount","_i2","_s2","columnFilter","_i3","_s3","fromTD","getCell","createCellCoords","isMultiple","toTD","fromOffset","toOffset","containerOffset","TABLE","containerWidth","minTop","minLeft","inlineStartPos","fromWidth","gridRightPos","isEntireColumnSelected","modifiedValues","getDimensionsFromHeader","fromTH","_modifiedValues","isEntireRowSelected","_modifiedValues2","_fromTH","_modifiedValues3","borderTopWidth","delta","cornerVisibleSetting","layerLevel","hookResult","checkRow","checkCol","_hookResult","borderRightWidth","trimmingContainer","trimToWindow","documentElement","cornerHalfWidth","cornerHalfHeight","toTdOffsetLeft","offsetLeft","cornerOverlappingContainer","cornerEdge","toTdOffsetTop","offsetTop","cornerBottomEdge","_cornerOverlappingContainer","borderBottomWidth","startRowIndex","endRowIndex","getFirstRenderedRow","getLastRenderedRow","startColumnIndex","endColumnIndex","getFirstRenderedColumn","getLastRenderedColumn","direction","fromIndex","toIndex","headerIndex","rootHotElement","wtRootElement","parentNode","getHeaderFn","dimensionFn","entireSelectionClassname","index","dimension","dimensionProperty","startHeader","endHeader","getRowHeader","apply","arguments","getColumnHeader","classList","contains","columnHeaderLevelCount","startHeaderOffset","endOffset","changeBorderStyle","borderElement","changeBorderToDefaultStyle","defaultBorder","toggleHiddenClass","remove","destroy","destroyWithOwnEventsOnly","removeChild"],"sources":["/home/rstorey/wwwdev/Blucktool/node_modules/handsontable/3rdparty/walkontable/src/border.mjs"],"sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.symbol.to-primitive.js\";\nimport \"core-js/modules/es.date.to-primitive.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { addClass, hasClass, removeClass, getComputedStyle, getTrimmingContainer, innerWidth, innerHeight, offset, outerHeight, outerWidth } from \"../../../helpers/dom/element.mjs\";\nimport { stopImmediatePropagation } from \"../../../helpers/dom/event.mjs\";\nimport { objectEach } from \"../../../helpers/object.mjs\";\nimport { isMobileBrowser } from \"../../../helpers/browser.mjs\";\n/**\n *\n */\nvar Border = /*#__PURE__*/function () {\n  // TODO As this is an internal class, should be designed for using {Walkontable}. It uses the facade,\n  // TODO Con. Because the class is created on place where the instance reference comes from external origin.\n  // TODO Imho, the discrimination for handling both, facade and non-facade should be handled.\n  /**\n   * @param {WalkontableFacade} wotInstance The Walkontable instance.\n   * @param {object} settings The border settings.\n   */\n  function Border(wotInstance, settings) {\n    _classCallCheck(this, Border);\n    if (!settings) {\n      return;\n    }\n    this.eventManager = wotInstance.eventManager;\n    this.instance = wotInstance;\n    this.wot = wotInstance;\n    this.settings = settings;\n    this.mouseDown = false;\n    this.main = null;\n    this.top = null;\n    this.bottom = null;\n    this.start = null;\n    this.end = null;\n    this.topStyle = null;\n    this.bottomStyle = null;\n    this.startStyle = null;\n    this.endStyle = null;\n    this.cornerDefaultStyle = {\n      width: '6px',\n      height: '6px',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: '#FFF'\n    };\n    // Offset to moving the corner to be centered relative to the grid.\n    this.cornerCenterPointOffset = -(parseInt(this.cornerDefaultStyle.width, 10) / 2);\n    this.corner = null;\n    this.cornerStyle = null;\n    this.createBorders(settings);\n    this.registerListeners();\n  }\n\n  /**\n   * Register all necessary events.\n   */\n  _createClass(Border, [{\n    key: \"registerListeners\",\n    value: function registerListeners() {\n      var _this2 = this;\n      var documentBody = this.wot.rootDocument.body;\n      this.eventManager.addEventListener(documentBody, 'mousedown', function () {\n        return _this2.onMouseDown();\n      });\n      this.eventManager.addEventListener(documentBody, 'mouseup', function () {\n        return _this2.onMouseUp();\n      });\n      var _loop = function _loop(c) {\n        var element = _this2.main.childNodes[c];\n        _this2.eventManager.addEventListener(element, 'mouseenter', function (event) {\n          return _this2.onMouseEnter(event, _this2.main.childNodes[c]);\n        });\n      };\n      for (var c = 0, len = this.main.childNodes.length; c < len; c++) {\n        _loop(c);\n      }\n    }\n\n    /**\n     * Mouse down listener.\n     *\n     * @private\n     */\n  }, {\n    key: \"onMouseDown\",\n    value: function onMouseDown() {\n      this.mouseDown = true;\n    }\n\n    /**\n     * Mouse up listener.\n     *\n     * @private\n     */\n  }, {\n    key: \"onMouseUp\",\n    value: function onMouseUp() {\n      this.mouseDown = false;\n    }\n\n    /**\n     * Mouse enter listener for fragment selection functionality.\n     *\n     * @private\n     * @param {Event} event Dom event.\n     * @param {HTMLElement} parentElement Part of border element.\n     */\n  }, {\n    key: \"onMouseEnter\",\n    value: function onMouseEnter(event, parentElement) {\n      if (!this.mouseDown || !this.wot.getSetting('hideBorderOnMouseDownOver')) {\n        return;\n      }\n      event.preventDefault();\n      stopImmediatePropagation(event);\n      var _this = this;\n      var documentBody = this.wot.rootDocument.body;\n      var bounds = parentElement.getBoundingClientRect();\n\n      // Hide border to prevents selection jumping when fragmentSelection is enabled.\n      parentElement.style.display = 'none';\n\n      /**\n       * @param {Event} mouseEvent The mouse event object.\n       * @returns {boolean}\n       */\n      function isOutside(mouseEvent) {\n        if (mouseEvent.clientY < Math.floor(bounds.top)) {\n          return true;\n        }\n        if (mouseEvent.clientY > Math.ceil(bounds.top + bounds.height)) {\n          return true;\n        }\n        if (mouseEvent.clientX < Math.floor(bounds.left)) {\n          return true;\n        }\n        if (mouseEvent.clientX > Math.ceil(bounds.left + bounds.width)) {\n          return true;\n        }\n      }\n\n      /**\n       * @param {Event} handlerEvent The mouse event object.\n       */\n      function handler(handlerEvent) {\n        if (isOutside(handlerEvent)) {\n          _this.eventManager.removeEventListener(documentBody, 'mousemove', handler);\n          parentElement.style.display = 'block';\n        }\n      }\n      this.eventManager.addEventListener(documentBody, 'mousemove', handler);\n    }\n\n    /**\n     * Create border elements.\n     *\n     * @param {object} settings The border settings.\n     */\n  }, {\n    key: \"createBorders\",\n    value: function createBorders(settings) {\n      var rootDocument = this.wot.rootDocument;\n      this.main = rootDocument.createElement('div');\n      var borderDivs = ['top', 'start', 'bottom', 'end', 'corner'];\n      var style = this.main.style;\n      style.position = 'absolute';\n      style.top = 0;\n      style.left = 0;\n      for (var i = 0; i < 5; i++) {\n        var position = borderDivs[i];\n        var div = rootDocument.createElement('div');\n        div.className = \"wtBorder \".concat(this.settings.className || ''); // + borderDivs[i];\n\n        if (this.settings[position] && this.settings[position].hide) {\n          div.className += ' hidden';\n        }\n        style = div.style;\n        style.backgroundColor = this.settings[position] && this.settings[position].color ? this.settings[position].color : settings.border.color;\n        style.height = this.settings[position] && this.settings[position].width ? \"\".concat(this.settings[position].width, \"px\") : \"\".concat(settings.border.width, \"px\");\n        style.width = this.settings[position] && this.settings[position].width ? \"\".concat(this.settings[position].width, \"px\") : \"\".concat(settings.border.width, \"px\");\n        this.main.appendChild(div);\n      }\n      this.top = this.main.childNodes[0];\n      this.start = this.main.childNodes[1];\n      this.bottom = this.main.childNodes[2];\n      this.end = this.main.childNodes[3];\n      this.topStyle = this.top.style;\n      this.startStyle = this.start.style;\n      this.bottomStyle = this.bottom.style;\n      this.endStyle = this.end.style;\n      this.corner = this.main.childNodes[4];\n      this.corner.className += ' corner';\n      this.cornerStyle = this.corner.style;\n      this.cornerStyle.width = this.cornerDefaultStyle.width;\n      this.cornerStyle.height = this.cornerDefaultStyle.height;\n      this.cornerStyle.border = [this.cornerDefaultStyle.borderWidth, this.cornerDefaultStyle.borderStyle, this.cornerDefaultStyle.borderColor].join(' ');\n      if (isMobileBrowser()) {\n        this.createMultipleSelectorHandles();\n      }\n      this.disappear();\n      var wtTable = this.wot.wtTable;\n      var bordersHolder = wtTable.bordersHolder;\n      if (!bordersHolder) {\n        bordersHolder = rootDocument.createElement('div');\n        bordersHolder.className = 'htBorders';\n        wtTable.bordersHolder = bordersHolder;\n        wtTable.spreader.appendChild(bordersHolder);\n      }\n      bordersHolder.appendChild(this.main);\n    }\n\n    /**\n     * Create multiple selector handler for mobile devices.\n     */\n  }, {\n    key: \"createMultipleSelectorHandles\",\n    value: function createMultipleSelectorHandles() {\n      var _this3 = this;\n      var rootDocument = this.wot.rootDocument;\n      this.selectionHandles = {\n        top: rootDocument.createElement('DIV'),\n        topHitArea: rootDocument.createElement('DIV'),\n        bottom: rootDocument.createElement('DIV'),\n        bottomHitArea: rootDocument.createElement('DIV')\n      };\n      var width = 10;\n      var hitAreaWidth = 40;\n      this.selectionHandles.top.className = 'topSelectionHandle topLeftSelectionHandle';\n      this.selectionHandles.topHitArea.className = 'topSelectionHandle-HitArea topLeftSelectionHandle-HitArea';\n      this.selectionHandles.bottom.className = 'bottomSelectionHandle bottomRightSelectionHandle';\n      this.selectionHandles.bottomHitArea.className = 'bottomSelectionHandle-HitArea bottomRightSelectionHandle-HitArea';\n      this.selectionHandles.styles = {\n        top: this.selectionHandles.top.style,\n        topHitArea: this.selectionHandles.topHitArea.style,\n        bottom: this.selectionHandles.bottom.style,\n        bottomHitArea: this.selectionHandles.bottomHitArea.style\n      };\n      var hitAreaStyle = {\n        position: 'absolute',\n        height: \"\".concat(hitAreaWidth, \"px\"),\n        width: \"\".concat(hitAreaWidth, \"px\"),\n        'border-radius': \"\".concat(parseInt(hitAreaWidth / 1.5, 10), \"px\")\n      };\n      objectEach(hitAreaStyle, function (value, key) {\n        _this3.selectionHandles.styles.bottomHitArea[key] = value;\n        _this3.selectionHandles.styles.topHitArea[key] = value;\n      });\n      var handleStyle = {\n        position: 'absolute',\n        height: \"\".concat(width, \"px\"),\n        width: \"\".concat(width, \"px\"),\n        'border-radius': \"\".concat(parseInt(width / 1.5, 10), \"px\"),\n        background: '#F5F5FF',\n        border: '1px solid #4285c8'\n      };\n      objectEach(handleStyle, function (value, key) {\n        _this3.selectionHandles.styles.bottom[key] = value;\n        _this3.selectionHandles.styles.top[key] = value;\n      });\n      this.main.appendChild(this.selectionHandles.top);\n      this.main.appendChild(this.selectionHandles.bottom);\n      this.main.appendChild(this.selectionHandles.topHitArea);\n      this.main.appendChild(this.selectionHandles.bottomHitArea);\n    }\n\n    /**\n     * @param {number} row The visual row index.\n     * @param {number} col The visual column index.\n     * @returns {boolean}\n     */\n  }, {\n    key: \"isPartRange\",\n    value: function isPartRange(row, col) {\n      var areaSelection = this.wot.selections.createOrGetArea();\n      if (areaSelection.cellRange) {\n        if (row !== areaSelection.cellRange.to.row || col !== areaSelection.cellRange.to.col) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    /**\n     * @param {number} row The visual row index.\n     * @param {number} col The visual column index.\n     * @param {number} top The top position of the handler.\n     * @param {number} left The left position of the handler.\n     * @param {number} width The width of the handler.\n     * @param {number} height The height of the handler.\n     */\n  }, {\n    key: \"updateMultipleSelectionHandlesPosition\",\n    value: function updateMultipleSelectionHandlesPosition(row, col, top, left, width, height) {\n      var isRtl = this.wot.wtSettings.getSetting('rtlMode');\n      var inlinePosProperty = isRtl ? 'right' : 'left';\n      var _this$selectionHandle = this.selectionHandles.styles,\n        topStyles = _this$selectionHandle.top,\n        topHitAreaStyles = _this$selectionHandle.topHitArea,\n        bottomStyles = _this$selectionHandle.bottom,\n        bottomHitAreaStyles = _this$selectionHandle.bottomHitArea;\n      var handleBorderSize = parseInt(topStyles.borderWidth, 10);\n      var handleSize = parseInt(topStyles.width, 10);\n      var hitAreaSize = parseInt(topHitAreaStyles.width, 10);\n      var totalTableWidth = this.wot.wtTable.getWidth();\n      var totalTableHeight = this.wot.wtTable.getHeight();\n      topStyles.top = \"\".concat(parseInt(top - handleSize - 1, 10), \"px\");\n      topStyles[inlinePosProperty] = \"\".concat(parseInt(left - handleSize - 1, 10), \"px\");\n      topHitAreaStyles.top = \"\".concat(parseInt(top - hitAreaSize / 4 * 3, 10), \"px\");\n      topHitAreaStyles[inlinePosProperty] = \"\".concat(parseInt(left - hitAreaSize / 4 * 3, 10), \"px\");\n      var bottomHandlerInline = Math.min(parseInt(left + width, 10), totalTableWidth - handleSize - handleBorderSize * 2);\n      var bottomHandlerAreaInline = Math.min(parseInt(left + width - hitAreaSize / 4, 10), totalTableWidth - hitAreaSize - handleBorderSize * 2);\n      bottomStyles[inlinePosProperty] = \"\".concat(bottomHandlerInline, \"px\");\n      bottomHitAreaStyles[inlinePosProperty] = \"\".concat(bottomHandlerAreaInline, \"px\");\n      var bottomHandlerTop = Math.min(parseInt(top + height, 10), totalTableHeight - handleSize - handleBorderSize * 2);\n      var bottomHandlerAreaTop = Math.min(parseInt(top + height - hitAreaSize / 4, 10), totalTableHeight - hitAreaSize - handleBorderSize * 2);\n      bottomStyles.top = \"\".concat(bottomHandlerTop, \"px\");\n      bottomHitAreaStyles.top = \"\".concat(bottomHandlerAreaTop, \"px\");\n      if (this.settings.border.cornerVisible && this.settings.border.cornerVisible()) {\n        topStyles.display = 'block';\n        topHitAreaStyles.display = 'block';\n        if (this.isPartRange(row, col)) {\n          bottomStyles.display = 'none';\n          bottomHitAreaStyles.display = 'none';\n        } else {\n          bottomStyles.display = 'block';\n          bottomHitAreaStyles.display = 'block';\n        }\n      } else {\n        topStyles.display = 'none';\n        bottomStyles.display = 'none';\n        topHitAreaStyles.display = 'none';\n        bottomHitAreaStyles.display = 'none';\n      }\n      if (row === this.wot.wtSettings.getSetting('fixedRowsTop') || col === this.wot.wtSettings.getSetting('fixedColumnsStart')) {\n        topStyles.zIndex = '9999';\n        topHitAreaStyles.zIndex = '9999';\n      } else {\n        topStyles.zIndex = '';\n        topHitAreaStyles.zIndex = '';\n      }\n    }\n\n    /**\n     * Show border around one or many cells.\n     *\n     * @param {Array} corners The corner coordinates.\n     */\n  }, {\n    key: \"appear\",\n    value: function appear(corners) {\n      if (this.disabled) {\n        return;\n      }\n      var _this$wot = this.wot,\n        wtTable = _this$wot.wtTable,\n        rootDocument = _this$wot.rootDocument,\n        rootWindow = _this$wot.rootWindow; // todo refactoring: consider about using internal facade (it is given by external code)\n      var fromRow;\n      var toRow;\n      var fromColumn;\n      var toColumn;\n      var rowHeader;\n      var columnHeader;\n      var rowsCount = wtTable.getRenderedRowsCount();\n      for (var i = 0; i < rowsCount; i += 1) {\n        var s = wtTable.rowFilter.renderedToSource(i);\n        if (s >= corners[0] && s <= corners[2]) {\n          fromRow = s;\n          rowHeader = corners[0];\n          break;\n        }\n      }\n      for (var _i = rowsCount - 1; _i >= 0; _i -= 1) {\n        var _s = wtTable.rowFilter.renderedToSource(_i);\n        if (_s >= corners[0] && _s <= corners[2]) {\n          toRow = _s;\n          break;\n        }\n      }\n      var columnsCount = wtTable.getRenderedColumnsCount();\n      for (var _i2 = 0; _i2 < columnsCount; _i2 += 1) {\n        var _s2 = wtTable.columnFilter.renderedToSource(_i2);\n        if (_s2 >= corners[1] && _s2 <= corners[3]) {\n          fromColumn = _s2;\n          columnHeader = corners[1];\n          break;\n        }\n      }\n      for (var _i3 = columnsCount - 1; _i3 >= 0; _i3 -= 1) {\n        var _s3 = wtTable.columnFilter.renderedToSource(_i3);\n        if (_s3 >= corners[1] && _s3 <= corners[3]) {\n          toColumn = _s3;\n          break;\n        }\n      }\n      if (fromRow === void 0 || fromColumn === void 0) {\n        this.disappear();\n        return;\n      }\n      var fromTD = wtTable.getCell(this.wot.createCellCoords(fromRow, fromColumn));\n      var isMultiple = fromRow !== toRow || fromColumn !== toColumn;\n      var toTD = isMultiple ? wtTable.getCell(this.wot.createCellCoords(toRow, toColumn)) : fromTD;\n      var fromOffset = offset(fromTD);\n      var toOffset = isMultiple ? offset(toTD) : fromOffset;\n      var containerOffset = offset(wtTable.TABLE);\n      var containerWidth = outerWidth(wtTable.TABLE);\n      var minTop = fromOffset.top;\n      var minLeft = fromOffset.left;\n      var isRtl = this.wot.wtSettings.getSetting('rtlMode');\n      var inlineStartPos = 0;\n      var width = 0;\n      if (isRtl) {\n        var fromWidth = outerWidth(fromTD);\n        var gridRightPos = rootWindow.innerWidth - containerOffset.left - containerWidth;\n        width = minLeft + fromWidth - toOffset.left;\n        inlineStartPos = rootWindow.innerWidth - minLeft - fromWidth - gridRightPos - 1;\n      } else {\n        width = toOffset.left + outerWidth(toTD) - minLeft;\n        inlineStartPos = minLeft - containerOffset.left - 1;\n      }\n      if (this.isEntireColumnSelected(fromRow, toRow)) {\n        var modifiedValues = this.getDimensionsFromHeader('columns', fromColumn, toColumn, rowHeader, containerOffset);\n        var fromTH = null;\n        if (modifiedValues) {\n          var _modifiedValues = _slicedToArray(modifiedValues, 3);\n          fromTH = _modifiedValues[0];\n          inlineStartPos = _modifiedValues[1];\n          width = _modifiedValues[2];\n        }\n        if (fromTH) {\n          fromTD = fromTH;\n        }\n      }\n      var top = minTop - containerOffset.top - 1;\n      var height = toOffset.top + outerHeight(toTD) - minTop;\n      if (this.isEntireRowSelected(fromColumn, toColumn)) {\n        var _modifiedValues2 = this.getDimensionsFromHeader('rows', fromRow, toRow, columnHeader, containerOffset);\n        var _fromTH = null;\n        if (_modifiedValues2) {\n          var _modifiedValues3 = _slicedToArray(_modifiedValues2, 3);\n          _fromTH = _modifiedValues3[0];\n          top = _modifiedValues3[1];\n          height = _modifiedValues3[2];\n        }\n        if (_fromTH) {\n          fromTD = _fromTH;\n        }\n      }\n      var style = getComputedStyle(fromTD, rootWindow);\n      if (parseInt(style.borderTopWidth, 10) > 0) {\n        top += 1;\n        height = height > 0 ? height - 1 : 0;\n      }\n      if (parseInt(style[isRtl ? 'borderRightWidth' : 'borderLeftWidth'], 10) > 0) {\n        inlineStartPos += 1;\n        width = width > 0 ? width - 1 : 0;\n      }\n      var inlinePosProperty = isRtl ? 'right' : 'left';\n      this.topStyle.top = \"\".concat(top, \"px\");\n      this.topStyle[inlinePosProperty] = \"\".concat(inlineStartPos, \"px\");\n      this.topStyle.width = \"\".concat(width, \"px\");\n      this.topStyle.display = 'block';\n      this.startStyle.top = \"\".concat(top, \"px\");\n      this.startStyle[inlinePosProperty] = \"\".concat(inlineStartPos, \"px\");\n      this.startStyle.height = \"\".concat(height, \"px\");\n      this.startStyle.display = 'block';\n      var delta = Math.floor(this.settings.border.width / 2);\n      this.bottomStyle.top = \"\".concat(top + height - delta, \"px\");\n      this.bottomStyle[inlinePosProperty] = \"\".concat(inlineStartPos, \"px\");\n      this.bottomStyle.width = \"\".concat(width, \"px\");\n      this.bottomStyle.display = 'block';\n      this.endStyle.top = \"\".concat(top, \"px\");\n      this.endStyle[inlinePosProperty] = \"\".concat(inlineStartPos + width - delta, \"px\");\n      this.endStyle.height = \"\".concat(height + 1, \"px\");\n      this.endStyle.display = 'block';\n      var cornerVisibleSetting = this.settings.border.cornerVisible;\n      cornerVisibleSetting = typeof cornerVisibleSetting === 'function' ? cornerVisibleSetting(this.settings.layerLevel) : cornerVisibleSetting;\n      var hookResult = this.wot.getSetting('onModifyGetCellCoords', toRow, toColumn);\n      var checkRow = toRow,\n        checkCol = toColumn;\n      if (hookResult && Array.isArray(hookResult)) {\n        var _hookResult = _slicedToArray(hookResult, 4);\n        checkRow = _hookResult[2];\n        checkCol = _hookResult[3];\n      }\n      if (isMobileBrowser() || !cornerVisibleSetting || this.isPartRange(checkRow, checkCol)) {\n        this.cornerStyle.display = 'none';\n      } else {\n        this.cornerStyle.top = \"\".concat(top + height + this.cornerCenterPointOffset - 1, \"px\");\n        this.cornerStyle[inlinePosProperty] = \"\".concat(inlineStartPos + width + this.cornerCenterPointOffset - 1, \"px\");\n        this.cornerStyle.borderRightWidth = this.cornerDefaultStyle.borderWidth;\n        this.cornerStyle.width = this.cornerDefaultStyle.width;\n\n        // Hide the fill handle, so the possible further adjustments won't force unneeded scrollbars.\n        this.cornerStyle.display = 'none';\n        var trimmingContainer = getTrimmingContainer(wtTable.TABLE);\n        var trimToWindow = trimmingContainer === rootWindow;\n        if (trimToWindow) {\n          trimmingContainer = rootDocument.documentElement;\n        }\n        var cornerHalfWidth = parseInt(this.cornerDefaultStyle.width, 10) / 2;\n        var cornerHalfHeight = parseInt(this.cornerDefaultStyle.height, 10) / 2;\n        if (toColumn === this.wot.getSetting('totalColumns') - 1) {\n          var toTdOffsetLeft = trimToWindow ? toTD.getBoundingClientRect().left : toTD.offsetLeft;\n          var cornerOverlappingContainer = false;\n          var cornerEdge = 0;\n          if (isRtl) {\n            cornerEdge = toTdOffsetLeft - parseInt(this.cornerDefaultStyle.width, 10) / 2;\n            cornerOverlappingContainer = cornerEdge < 0;\n          } else {\n            cornerEdge = toTdOffsetLeft + outerWidth(toTD) + parseInt(this.cornerDefaultStyle.width, 10) / 2;\n            cornerOverlappingContainer = cornerEdge >= innerWidth(trimmingContainer);\n          }\n          if (cornerOverlappingContainer) {\n            this.cornerStyle[inlinePosProperty] = \"\".concat(Math.floor(inlineStartPos + width + this.cornerCenterPointOffset - cornerHalfWidth), \"px\");\n            this.cornerStyle[isRtl ? 'borderLeftWidth' : 'borderRightWidth'] = 0;\n          }\n        }\n        if (toRow === this.wot.getSetting('totalRows') - 1) {\n          var toTdOffsetTop = trimToWindow ? toTD.getBoundingClientRect().top : toTD.offsetTop;\n          var cornerBottomEdge = toTdOffsetTop + outerHeight(toTD) + parseInt(this.cornerDefaultStyle.height, 10) / 2;\n          var _cornerOverlappingContainer = cornerBottomEdge >= innerHeight(trimmingContainer);\n          if (_cornerOverlappingContainer) {\n            this.cornerStyle.top = \"\".concat(Math.floor(top + height + this.cornerCenterPointOffset - cornerHalfHeight), \"px\");\n            this.cornerStyle.borderBottomWidth = 0;\n          }\n        }\n        this.cornerStyle.display = 'block';\n      }\n      if (isMobileBrowser()) {\n        this.updateMultipleSelectionHandlesPosition(toRow, toColumn, top, inlineStartPos, width, height);\n      }\n    }\n\n    /**\n     * Check whether an entire column of cells is selected.\n     *\n     * @private\n     * @param {number} startRowIndex Start row index.\n     * @param {number} endRowIndex End row index.\n     * @returns {boolean}\n     */\n  }, {\n    key: \"isEntireColumnSelected\",\n    value: function isEntireColumnSelected(startRowIndex, endRowIndex) {\n      return startRowIndex === this.wot.wtTable.getFirstRenderedRow() && endRowIndex === this.wot.wtTable.getLastRenderedRow();\n    }\n\n    /**\n     * Check whether an entire row of cells is selected.\n     *\n     * @private\n     * @param {number} startColumnIndex Start column index.\n     * @param {number} endColumnIndex End column index.\n     * @returns {boolean}\n     */\n  }, {\n    key: \"isEntireRowSelected\",\n    value: function isEntireRowSelected(startColumnIndex, endColumnIndex) {\n      return startColumnIndex === this.wot.wtTable.getFirstRenderedColumn() && endColumnIndex === this.wot.wtTable.getLastRenderedColumn();\n    }\n\n    /**\n     * Get left/top index and width/height depending on the `direction` provided.\n     *\n     * @private\n     * @param {string} direction `rows` or `columns`, defines if an entire column or row is selected.\n     * @param {number} fromIndex Start index of the selection.\n     * @param {number} toIndex End index of the selection.\n     * @param {number} headerIndex The header index as negative value.\n     * @param {number} containerOffset Offset of the container.\n     * @returns {Array|boolean} Returns an array of [headerElement, left, width] or [headerElement, top, height], depending on `direction` (`false` in case of an error getting the headers).\n     */\n  }, {\n    key: \"getDimensionsFromHeader\",\n    value: function getDimensionsFromHeader(direction, fromIndex, toIndex, headerIndex, containerOffset) {\n      var wtTable = this.wot.wtTable;\n      var rootHotElement = wtTable.wtRootElement.parentNode;\n      var getHeaderFn = null;\n      var dimensionFn = null;\n      var entireSelectionClassname = null;\n      var index = null;\n      var dimension = null;\n      var dimensionProperty = null;\n      var startHeader = null;\n      var endHeader = null;\n      switch (direction) {\n        case 'rows':\n          getHeaderFn = function getHeaderFn() {\n            return wtTable.getRowHeader.apply(wtTable, arguments);\n          };\n          dimensionFn = function dimensionFn() {\n            return outerHeight.apply(void 0, arguments);\n          };\n          entireSelectionClassname = 'ht__selection--rows';\n          dimensionProperty = 'top';\n          break;\n        case 'columns':\n          getHeaderFn = function getHeaderFn() {\n            return wtTable.getColumnHeader.apply(wtTable, arguments);\n          };\n          dimensionFn = function dimensionFn() {\n            return outerWidth.apply(void 0, arguments);\n          };\n          entireSelectionClassname = 'ht__selection--columns';\n          dimensionProperty = 'left';\n          break;\n        default:\n      }\n      if (rootHotElement.classList.contains(entireSelectionClassname)) {\n        var columnHeaderLevelCount = this.wot.getSetting('columnHeaders').length;\n        startHeader = getHeaderFn(fromIndex, columnHeaderLevelCount - headerIndex);\n        endHeader = getHeaderFn(toIndex, columnHeaderLevelCount - headerIndex);\n        if (!startHeader || !endHeader) {\n          return false;\n        }\n        var startHeaderOffset = offset(startHeader);\n        var endOffset = offset(endHeader);\n        if (startHeader && endHeader) {\n          index = startHeaderOffset[dimensionProperty] - containerOffset[dimensionProperty] - 1;\n          dimension = endOffset[dimensionProperty] + dimensionFn(endHeader) - startHeaderOffset[dimensionProperty];\n        }\n        return [startHeader, index, dimension];\n      }\n      return false;\n    }\n\n    /**\n     * Change border style.\n     *\n     * @private\n     * @param {string} borderElement Coordinate where add/remove border: top, bottom, start, end.\n     * @param {object} border The border object descriptor.\n     */\n  }, {\n    key: \"changeBorderStyle\",\n    value: function changeBorderStyle(borderElement, border) {\n      var style = this[borderElement].style;\n      var borderStyle = border[borderElement];\n      if (!borderStyle || borderStyle.hide) {\n        addClass(this[borderElement], 'hidden');\n      } else {\n        if (hasClass(this[borderElement], 'hidden')) {\n          removeClass(this[borderElement], 'hidden');\n        }\n        style.backgroundColor = borderStyle.color;\n        if (borderElement === 'top' || borderElement === 'bottom') {\n          style.height = \"\".concat(borderStyle.width, \"px\");\n        }\n        if (borderElement === 'start' || borderElement === 'end') {\n          style.width = \"\".concat(borderStyle.width, \"px\");\n        }\n      }\n    }\n\n    /**\n     * Change border style to default.\n     *\n     * @private\n     * @param {string} position The position type (\"top\", \"bottom\", \"start\", \"end\") to change.\n     */\n  }, {\n    key: \"changeBorderToDefaultStyle\",\n    value: function changeBorderToDefaultStyle(position) {\n      var defaultBorder = {\n        width: 1,\n        color: '#000'\n      };\n      var style = this[position].style;\n      style.backgroundColor = defaultBorder.color;\n      style.width = \"\".concat(defaultBorder.width, \"px\");\n      style.height = \"\".concat(defaultBorder.width, \"px\");\n    }\n\n    /**\n     * Toggle class 'hidden' to element.\n     *\n     * @private\n     * @param {string} borderElement Coordinate where add/remove border: top, bottom, start, end.\n     * @param {boolean} [remove] Defines type of the action to perform.\n     */\n  }, {\n    key: \"toggleHiddenClass\",\n    value: function toggleHiddenClass(borderElement, remove) {\n      this.changeBorderToDefaultStyle(borderElement);\n      if (remove) {\n        addClass(this[borderElement], 'hidden');\n      } else {\n        removeClass(this[borderElement], 'hidden');\n      }\n    }\n\n    /**\n     * Hide border.\n     */\n  }, {\n    key: \"disappear\",\n    value: function disappear() {\n      this.topStyle.display = 'none';\n      this.bottomStyle.display = 'none';\n      this.startStyle.display = 'none';\n      this.endStyle.display = 'none';\n      this.cornerStyle.display = 'none';\n      if (isMobileBrowser()) {\n        this.selectionHandles.styles.top.display = 'none';\n        this.selectionHandles.styles.topHitArea.display = 'none';\n        this.selectionHandles.styles.bottom.display = 'none';\n        this.selectionHandles.styles.bottomHitArea.display = 'none';\n      }\n    }\n\n    /**\n     * Cleans up all the DOM state related to a Border instance. Call this prior to deleting a Border instance.\n     */\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.eventManager.destroyWithOwnEventsOnly();\n      this.main.parentNode.removeChild(this.main);\n    }\n  }]);\n  return Border;\n}();\nexport default Border;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}