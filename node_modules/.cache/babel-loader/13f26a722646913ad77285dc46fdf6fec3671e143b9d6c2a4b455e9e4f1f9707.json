{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return _assertThisInitialized(self);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nimport { BasePlugin } from \"../base/index.mjs\";\nimport { arrayEach, arrayFilter, arrayReduce, arrayMap } from \"../../helpers/array.mjs\";\nimport { cancelAnimationFrame, requestAnimationFrame } from \"../../helpers/feature.mjs\";\nimport GhostTable from \"../../utils/ghostTable.mjs\";\nimport Hooks from \"../../pluginHooks.mjs\";\nimport { isObject, hasOwnProperty } from \"../../helpers/object.mjs\";\nimport { valueAccordingPercent, rangeEach } from \"../../helpers/number.mjs\";\nimport SamplesGenerator from \"../../utils/samplesGenerator.mjs\";\nimport { isPercentValue } from \"../../helpers/string.mjs\";\nimport { ViewportColumnsCalculator } from \"../../3rdparty/walkontable/src/index.mjs\";\nimport { PhysicalIndexToValueMap as IndexToValueMap } from \"../../translations/index.mjs\";\nimport { isDefined } from \"../../helpers/mixed.mjs\";\nHooks.getSingleton().register('modifyAutoColumnSizeSeed');\nexport var PLUGIN_KEY = 'autoColumnSize';\nexport var PLUGIN_PRIORITY = 10;\nvar privatePool = new WeakMap();\nvar COLUMN_SIZE_MAP_NAME = 'autoColumnSize';\n\n/* eslint-disable jsdoc/require-description-complete-sentence */\n/**\n * @plugin AutoColumnSize\n * @class AutoColumnSize\n *\n * @description\n * This plugin allows to set column widths based on their widest cells.\n *\n * By default, the plugin is declared as `undefined`, which makes it enabled (same as if it was declared as `true`).\n * Enabling this plugin may decrease the overall table performance, as it needs to calculate the widths of all cells to\n * resize the columns accordingly.\n * If you experience problems with the performance, try turning this feature off and declaring the column widths manually.\n *\n * Column width calculations are divided into sync and async part. Each of this parts has their own advantages and\n * disadvantages. Synchronous calculations are faster but they block the browser UI, while the slower asynchronous\n * operations don't block the browser UI.\n *\n * To configure the sync/async distribution, you can pass an absolute value (number of columns) or a percentage value to a config object:\n *\n * ```js\n * // as a number (300 columns in sync, rest async)\n * autoColumnSize: {syncLimit: 300},\n *\n * // as a string (percent)\n * autoColumnSize: {syncLimit: '40%'},\n * ```\n *\n * The plugin uses {@link GhostTable} and {@link SamplesGenerator} for calculations.\n * First, {@link SamplesGenerator} prepares samples of data with its coordinates.\n * Next {@link GhostTable} uses coordinates to get cells' renderers and append all to the DOM through DocumentFragment.\n *\n * Sampling accepts additional options:\n * - *samplingRatio* - Defines how many samples for the same length will be used to calculate. Default is `3`.\n *\n * ```js\n *   autoColumnSize: {\n *     samplingRatio: 10,\n *   }\n * ```\n *\n * - *allowSampleDuplicates* - Defines if duplicated values might be used in sampling. Default is `false`.\n *\n * ```js\n *   autoColumnSize: {\n *     allowSampleDuplicates: true,\n *   }\n * ```\n *\n * To configure this plugin see {@link Options#autoColumnSize}.\n *\n * @example\n *\n * ::: only-for javascript\n * ```js\n * const hot = new Handsontable(document.getElementById('example'), {\n *   data: getData(),\n *   autoColumnSize: true\n * });\n * // Access to plugin instance:\n * const plugin = hot.getPlugin('autoColumnSize');\n *\n * plugin.getColumnWidth(4);\n *\n * if (plugin.isEnabled()) {\n *   // code...\n * }\n * ```\n * :::\n *\n * ::: only-for react\n * ```jsx\n * const hotRef = useRef(null);\n *\n * ...\n *\n * // First, let's contruct Handsontable\n * <HotTable\n *   ref={hotRef}\n *   data={getData()}\n *   autoColumnSize={true}\n * />\n *\n * ...\n *\n * // Access to plugin instance:\n * const hot = hotRef.current.hotInstance;\n * const plugin = hot.getPlugin('autoColumnSize');\n *\n * plugin.getColumnWidth(4);\n *\n * if (plugin.isEnabled()) {\n *   // code...\n * }\n * ```\n * :::\n */\n/* eslint-enable jsdoc/require-description-complete-sentence */\nexport var AutoColumnSize = /*#__PURE__*/function (_BasePlugin) {\n  _inherits(AutoColumnSize, _BasePlugin);\n  var _super = _createSuper(AutoColumnSize);\n  function AutoColumnSize(hotInstance) {\n    var _this;\n    _classCallCheck(this, AutoColumnSize);\n    _this = _super.call(this, hotInstance);\n    privatePool.set(_assertThisInitialized(_this), {\n      /**\n       * Cached column header names. It is used to diff current column headers with previous state and detect which\n       * columns width should be updated.\n       *\n       * @private\n       * @type {Array}\n       */\n      cachedColumnHeaders: []\n    });\n    /**\n     * Instance of {@link GhostTable} for rows and columns size calculations.\n     *\n     * @private\n     * @type {GhostTable}\n     */\n    _this.ghostTable = new GhostTable(_this.hot);\n    /**\n     * Instance of {@link SamplesGenerator} for generating samples necessary for columns width calculations.\n     *\n     * @private\n     * @type {SamplesGenerator}\n     * @fires Hooks#modifyAutoColumnSizeSeed\n     */\n    _this.samplesGenerator = new SamplesGenerator(function (row, column) {\n      var cellMeta = _this.hot.getCellMeta(row, column);\n      var cellValue = '';\n      if (!cellMeta.spanned) {\n        cellValue = _this.hot.getDataAtCell(row, column);\n      }\n      var bundleSeed = '';\n      if (_this.hot.hasHook('modifyAutoColumnSizeSeed')) {\n        bundleSeed = _this.hot.runHooks('modifyAutoColumnSizeSeed', bundleSeed, cellMeta, cellValue);\n      }\n      return {\n        value: cellValue,\n        bundleSeed: bundleSeed\n      };\n    });\n    /**\n     * `true` only if the first calculation was performed.\n     *\n     * @private\n     * @type {boolean}\n     */\n    _this.firstCalculation = true;\n    /**\n     * `true` if the size calculation is in progress.\n     *\n     * @type {boolean}\n     */\n    _this.inProgress = false;\n    /**\n     * Number of already measured columns (we already know their sizes).\n     *\n     * @type {number}\n     */\n    _this.measuredColumns = 0;\n    /**\n     * PhysicalIndexToValueMap to keep and track widths for physical column indexes.\n     *\n     * @private\n     * @type {PhysicalIndexToValueMap}\n     */\n    _this.columnWidthsMap = new IndexToValueMap();\n    _this.hot.columnIndexMapper.registerMap(COLUMN_SIZE_MAP_NAME, _this.columnWidthsMap);\n\n    // Leave the listener active to allow auto-sizing the columns when the plugin is disabled.\n    // This is necessary for width recalculation for resize handler doubleclick (ManualColumnResize).\n    _this.addHook('beforeColumnResize', function (size, column, isDblClick) {\n      return _this.onBeforeColumnResize(size, column, isDblClick);\n    });\n    return _this;\n  }\n\n  /**\n   * Checks if the plugin is enabled in the handsontable settings. This method is executed in {@link Hooks#beforeInit}\n   * hook and if it returns `true` then the {@link #enablePlugin} method is called.\n   *\n   * @returns {boolean}\n   */\n  _createClass(AutoColumnSize, [{\n    key: \"isEnabled\",\n    value: function isEnabled() {\n      return this.hot.getSettings()[PLUGIN_KEY] !== false && !this.hot.getSettings().colWidths;\n    }\n\n    /**\n     * Enables the plugin functionality for this Handsontable instance.\n     */\n  }, {\n    key: \"enablePlugin\",\n    value: function enablePlugin() {\n      var _this2 = this;\n      if (this.enabled) {\n        return;\n      }\n      var setting = this.hot.getSettings()[PLUGIN_KEY];\n      if (setting && setting.useHeaders !== null && setting.useHeaders !== void 0) {\n        this.ghostTable.setSetting('useHeaders', setting.useHeaders);\n      }\n      this.setSamplingOptions();\n      this.addHook('afterLoadData', function () {\n        return _this2.onAfterLoadData.apply(_this2, arguments);\n      });\n      this.addHook('beforeChangeRender', function (changes) {\n        return _this2.onBeforeChange(changes);\n      });\n      this.addHook('afterFormulasValuesUpdate', function (changes) {\n        return _this2.onAfterFormulasValuesUpdate(changes);\n      });\n      this.addHook('beforeViewRender', function (force) {\n        return _this2.onBeforeViewRender(force);\n      });\n      this.addHook('modifyColWidth', function (width, col) {\n        return _this2.getColumnWidth(col, width);\n      });\n      this.addHook('afterInit', function () {\n        return _this2.onAfterInit();\n      });\n      _get(_getPrototypeOf(AutoColumnSize.prototype), \"enablePlugin\", this).call(this);\n    }\n\n    /**\n     * Updates the plugin's state. This method is executed when {@link Core#updateSettings} is invoked.\n     */\n  }, {\n    key: \"updatePlugin\",\n    value: function updatePlugin() {\n      var changedColumns = this.findColumnsWhereHeaderWasChanged();\n      if (changedColumns.length) {\n        this.clearCache(changedColumns);\n        this.calculateVisibleColumnsWidth();\n      }\n      _get(_getPrototypeOf(AutoColumnSize.prototype), \"updatePlugin\", this).call(this);\n    }\n\n    /**\n     * Disables the plugin functionality for this Handsontable instance.\n     */\n  }, {\n    key: \"disablePlugin\",\n    value: function disablePlugin() {\n      var _this3 = this;\n      _get(_getPrototypeOf(AutoColumnSize.prototype), \"disablePlugin\", this).call(this);\n\n      // Leave the listener active to allow auto-sizing the columns when the plugin is disabled.\n      // This is necessary for width recalculation for resize handler doubleclick (ManualColumnResize).\n      this.addHook('beforeColumnResize', function (size, column, isDblClick) {\n        return _this3.onBeforeColumnResize(size, column, isDblClick);\n      });\n    }\n\n    /**\n     * Calculates visible columns width.\n     */\n  }, {\n    key: \"calculateVisibleColumnsWidth\",\n    value: function calculateVisibleColumnsWidth() {\n      var rowsCount = this.hot.countRows();\n\n      // Keep last column widths unchanged for situation when all rows was deleted or trimmed (pro #6)\n      if (!rowsCount) {\n        return;\n      }\n      var force = this.hot.renderCall;\n      var firstVisibleColumn = this.getFirstVisibleColumn();\n      var lastVisibleColumn = this.getLastVisibleColumn();\n      if (firstVisibleColumn === -1 || lastVisibleColumn === -1) {\n        return;\n      }\n      this.calculateColumnsWidth({\n        from: firstVisibleColumn,\n        to: lastVisibleColumn\n      }, void 0, force);\n    }\n\n    /**\n     * Calculates a columns width.\n     *\n     * @param {number|object} colRange Visual column index or an object with `from` and `to` visual indexes as a range.\n     * @param {number|object} rowRange Visual row index or an object with `from` and `to` visual indexes as a range.\n     * @param {boolean} [force=false] If `true` the calculation will be processed regardless of whether the width exists in the cache.\n     */\n  }, {\n    key: \"calculateColumnsWidth\",\n    value: function calculateColumnsWidth() {\n      var _this4 = this;\n      var colRange = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        from: 0,\n        to: this.hot.countCols() - 1\n      };\n      var rowRange = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        from: 0,\n        to: this.hot.countRows() - 1\n      };\n      var force = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      // eslint-disable-line max-len\n      var columnsRange = typeof colRange === 'number' ? {\n        from: colRange,\n        to: colRange\n      } : colRange;\n      var rowsRange = typeof rowRange === 'number' ? {\n        from: rowRange,\n        to: rowRange\n      } : rowRange;\n      rangeEach(columnsRange.from, columnsRange.to, function (visualColumn) {\n        var physicalColumn = _this4.hot.toPhysicalColumn(visualColumn);\n        if (physicalColumn === null) {\n          physicalColumn = visualColumn;\n        }\n        if (force || _this4.columnWidthsMap.getValueAtIndex(physicalColumn) === null && !_this4.hot._getColWidthFromSettings(physicalColumn)) {\n          var samples = _this4.samplesGenerator.generateColumnSamples(visualColumn, rowsRange);\n          arrayEach(samples, function (_ref) {\n            var _ref2 = _slicedToArray(_ref, 2),\n              column = _ref2[0],\n              sample = _ref2[1];\n            return _this4.ghostTable.addColumn(column, sample);\n          });\n        }\n      });\n      if (this.ghostTable.columns.length) {\n        this.hot.batchExecution(function () {\n          _this4.ghostTable.getWidths(function (visualColumn, width) {\n            var physicalColumn = _this4.hot.toPhysicalColumn(visualColumn);\n            _this4.columnWidthsMap.setValueAtIndex(physicalColumn, width);\n          });\n        }, true);\n        this.measuredColumns = columnsRange.to + 1;\n        this.ghostTable.clean();\n      }\n    }\n\n    /**\n     * Calculates all columns width. The calculated column will be cached in the {@link AutoColumnSize#widths} property.\n     * To retrieve width for specified column use {@link AutoColumnSize#getColumnWidth} method.\n     *\n     * @param {object|number} rowRange Row index or an object with `from` and `to` properties which define row range.\n     */\n  }, {\n    key: \"calculateAllColumnsWidth\",\n    value: function calculateAllColumnsWidth() {\n      var _this5 = this;\n      var rowRange = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        from: 0,\n        to: this.hot.countRows() - 1\n      };\n      var current = 0;\n      var length = this.hot.countCols() - 1;\n      var timer = null;\n      this.inProgress = true;\n      var loop = function loop() {\n        // When hot was destroyed after calculating finished cancel frame\n        if (!_this5.hot) {\n          cancelAnimationFrame(timer);\n          _this5.inProgress = false;\n          return;\n        }\n        _this5.calculateColumnsWidth({\n          from: current,\n          to: Math.min(current + AutoColumnSize.CALCULATION_STEP, length)\n        }, rowRange);\n        current = current + AutoColumnSize.CALCULATION_STEP + 1;\n        if (current < length) {\n          timer = requestAnimationFrame(loop);\n        } else {\n          cancelAnimationFrame(timer);\n          _this5.inProgress = false;\n\n          // @TODO Should call once per render cycle, currently fired separately in different plugins\n          _this5.hot.view.adjustElementsSize();\n        }\n      };\n      var syncLimit = this.getSyncCalculationLimit();\n\n      // sync\n      if (this.firstCalculation && syncLimit >= 0) {\n        this.calculateColumnsWidth({\n          from: 0,\n          to: syncLimit\n        }, rowRange);\n        this.firstCalculation = false;\n        current = syncLimit + 1;\n      }\n      // async\n      if (current < length) {\n        loop();\n      } else {\n        this.inProgress = false;\n      }\n    }\n\n    /**\n     * Sets the sampling options.\n     *\n     * @private\n     */\n  }, {\n    key: \"setSamplingOptions\",\n    value: function setSamplingOptions() {\n      var setting = this.hot.getSettings()[PLUGIN_KEY];\n      var samplingRatio = setting && hasOwnProperty(setting, 'samplingRatio') ? setting.samplingRatio : void 0;\n      var allowSampleDuplicates = setting && hasOwnProperty(setting, 'allowSampleDuplicates') ? setting.allowSampleDuplicates : void 0;\n      if (samplingRatio && !isNaN(samplingRatio)) {\n        this.samplesGenerator.setSampleCount(parseInt(samplingRatio, 10));\n      }\n      if (allowSampleDuplicates) {\n        this.samplesGenerator.setAllowDuplicates(allowSampleDuplicates);\n      }\n    }\n\n    /**\n     * Recalculates all columns width (overwrite cache values).\n     */\n  }, {\n    key: \"recalculateAllColumnsWidth\",\n    value: function recalculateAllColumnsWidth() {\n      if (this.hot.view && this.hot.view._wt.wtTable.isVisible()) {\n        this.clearCache();\n        this.calculateAllColumnsWidth();\n      }\n    }\n\n    /**\n     * Gets value which tells how many columns should be calculated synchronously (rest of the columns will be calculated\n     * asynchronously). The limit is calculated based on `syncLimit` set to `autoColumnSize` option (see {@link Options#autoColumnSize}).\n     *\n     * @returns {number}\n     */\n  }, {\n    key: \"getSyncCalculationLimit\",\n    value: function getSyncCalculationLimit() {\n      var settings = this.hot.getSettings()[PLUGIN_KEY];\n      /* eslint-disable no-bitwise */\n      var limit = AutoColumnSize.SYNC_CALCULATION_LIMIT;\n      var colsLimit = this.hot.countCols() - 1;\n      if (isObject(settings)) {\n        limit = settings.syncLimit;\n        if (isPercentValue(limit)) {\n          limit = valueAccordingPercent(colsLimit, limit);\n        } else {\n          // Force to Number\n          limit >>= 0;\n        }\n      }\n      return Math.min(limit, colsLimit);\n    }\n\n    /**\n     * Gets the calculated column width.\n     *\n     * @param {number} column Visual column index.\n     * @param {number} [defaultWidth] Default column width. It will be picked up if no calculated width found.\n     * @param {boolean} [keepMinimum=true] If `true` then returned value won't be smaller then 50 (default column width).\n     * @returns {number}\n     */\n  }, {\n    key: \"getColumnWidth\",\n    value: function getColumnWidth(column) {\n      var defaultWidth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : void 0;\n      var keepMinimum = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var width = defaultWidth;\n      if (width === void 0) {\n        width = this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(column));\n        if (keepMinimum && typeof width === 'number') {\n          width = Math.max(width, ViewportColumnsCalculator.DEFAULT_WIDTH);\n        }\n      }\n      return width;\n    }\n\n    /**\n     * Gets the first visible column.\n     *\n     * @returns {number} Returns visual column index, -1 if table is not rendered or if there are no columns to base the the calculations on.\n     */\n  }, {\n    key: \"getFirstVisibleColumn\",\n    value: function getFirstVisibleColumn() {\n      var wot = this.hot.view._wt;\n      if (wot.wtViewport.columnsVisibleCalculator) {\n        // Fist fully visible column is stored as renderable index.\n        var firstFullyVisibleColumn = wot.wtTable.getFirstVisibleColumn();\n        if (firstFullyVisibleColumn !== -1) {\n          return this.hot.columnIndexMapper.getVisualFromRenderableIndex(firstFullyVisibleColumn);\n        }\n      }\n      if (wot.wtViewport.columnsRenderCalculator) {\n        var firstRenderedColumn = wot.wtTable.getFirstRenderedColumn();\n\n        // There are no rendered column.\n        if (firstRenderedColumn !== -1) {\n          return this.hot.columnIndexMapper.getVisualFromRenderableIndex(firstRenderedColumn);\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Gets the last visible column.\n     *\n     * @returns {number} Returns visual column index or -1 if table is not rendered.\n     */\n  }, {\n    key: \"getLastVisibleColumn\",\n    value: function getLastVisibleColumn() {\n      var wot = this.hot.view._wt;\n      if (wot.wtViewport.columnsVisibleCalculator) {\n        // Last fully visible column is stored as renderable index.\n        var lastFullyVisibleColumn = wot.wtTable.getLastVisibleColumn();\n        if (lastFullyVisibleColumn !== -1) {\n          return this.hot.columnIndexMapper.getVisualFromRenderableIndex(lastFullyVisibleColumn);\n        }\n      }\n      if (wot.wtViewport.columnsRenderCalculator) {\n        // Last fully visible column is stored as renderable index.\n        var lastRenderedColumn = wot.wtTable.getLastRenderedColumn();\n\n        // There are no rendered columns.\n        if (lastRenderedColumn !== -1) {\n          return this.hot.columnIndexMapper.getVisualFromRenderableIndex(lastRenderedColumn);\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Collects all columns which titles has been changed in comparison to the previous state.\n     *\n     * @private\n     * @returns {Array} It returns an array of physical column indexes.\n     */\n  }, {\n    key: \"findColumnsWhereHeaderWasChanged\",\n    value: function findColumnsWhereHeaderWasChanged() {\n      var columnHeaders = this.hot.getColHeader();\n      var _privatePool$get = privatePool.get(this),\n        cachedColumnHeaders = _privatePool$get.cachedColumnHeaders;\n      var changedColumns = arrayReduce(columnHeaders, function (acc, columnTitle, physicalColumn) {\n        var cachedColumnsLength = cachedColumnHeaders.length;\n        if (cachedColumnsLength - 1 < physicalColumn || cachedColumnHeaders[physicalColumn] !== columnTitle) {\n          acc.push(physicalColumn);\n        }\n        if (cachedColumnsLength - 1 < physicalColumn) {\n          cachedColumnHeaders.push(columnTitle);\n        } else {\n          cachedColumnHeaders[physicalColumn] = columnTitle;\n        }\n        return acc;\n      }, []);\n      return changedColumns;\n    }\n\n    /**\n     * Clears cache of calculated column widths. If you want to clear only selected columns pass an array with their indexes.\n     * Otherwise whole cache will be cleared.\n     *\n     * @param {number[]} [columns] List of physical column indexes to clear.\n     */\n  }, {\n    key: \"clearCache\",\n    value: function clearCache() {\n      var _this6 = this;\n      var columns = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      if (columns.length) {\n        this.hot.batchExecution(function () {\n          arrayEach(columns, function (physicalIndex) {\n            _this6.columnWidthsMap.setValueAtIndex(physicalIndex, null);\n          });\n        }, true);\n      } else {\n        this.columnWidthsMap.clear();\n      }\n    }\n\n    /**\n     * Checks if all widths were calculated. If not then return `true` (need recalculate).\n     *\n     * @returns {boolean}\n     */\n  }, {\n    key: \"isNeedRecalculate\",\n    value: function isNeedRecalculate() {\n      return !!arrayFilter(this.columnWidthsMap.getValues().slice(0, this.measuredColumns), function (item) {\n        return item === null;\n      }).length;\n    }\n\n    /**\n     * On before view render listener.\n     *\n     * @private\n     */\n  }, {\n    key: \"onBeforeViewRender\",\n    value: function onBeforeViewRender() {\n      this.calculateVisibleColumnsWidth();\n      if (this.isNeedRecalculate() && !this.inProgress) {\n        this.calculateAllColumnsWidth();\n      }\n    }\n\n    /**\n     * On after load data listener.\n     *\n     * @private\n     */\n  }, {\n    key: \"onAfterLoadData\",\n    value: function onAfterLoadData() {\n      var _this7 = this;\n      if (this.hot.view) {\n        this.recalculateAllColumnsWidth();\n      } else {\n        // first load - initialization\n        setTimeout(function () {\n          if (_this7.hot) {\n            _this7.recalculateAllColumnsWidth();\n          }\n        }, 0);\n      }\n    }\n\n    /**\n     * On before change listener.\n     *\n     * @private\n     * @param {Array} changes An array of modified data.\n     */\n  }, {\n    key: \"onBeforeChange\",\n    value: function onBeforeChange(changes) {\n      var _this8 = this;\n      var changedColumns = arrayMap(changes, function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n          columnProperty = _ref4[1];\n        return _this8.hot.toPhysicalColumn(_this8.hot.propToCol(columnProperty));\n      });\n      this.clearCache(Array.from(new Set(changedColumns)));\n    }\n\n    /**\n     * On before column resize listener.\n     *\n     * @private\n     * @param {number} size Calculated new column width.\n     * @param {number} column Visual index of the resized column.\n     * @param {boolean} isDblClick  Flag that determines whether there was a double-click.\n     * @returns {number}\n     */\n  }, {\n    key: \"onBeforeColumnResize\",\n    value: function onBeforeColumnResize(size, column, isDblClick) {\n      var newSize = size;\n      if (isDblClick) {\n        this.calculateColumnsWidth(column, void 0, true);\n        newSize = this.getColumnWidth(column, void 0, false);\n      }\n      return newSize;\n    }\n\n    /**\n     * On after Handsontable init fill plugin with all necessary values.\n     *\n     * @private\n     */\n  }, {\n    key: \"onAfterInit\",\n    value: function onAfterInit() {\n      privatePool.get(this).cachedColumnHeaders = this.hot.getColHeader();\n    }\n\n    /**\n     * After formulas values updated listener.\n     *\n     * @private\n     * @param {Array} changes An array of modified data.\n     */\n  }, {\n    key: \"onAfterFormulasValuesUpdate\",\n    value: function onAfterFormulasValuesUpdate(changes) {\n      var filteredChanges = arrayFilter(changes, function (change) {\n        var _change$address;\n        return isDefined((_change$address = change.address) === null || _change$address === void 0 ? void 0 : _change$address.col);\n      });\n      var changedColumns = arrayMap(filteredChanges, function (change) {\n        return change.address.col;\n      });\n      this.clearCache(Array.from(new Set(changedColumns)));\n    }\n\n    /**\n     * Destroys the plugin instance.\n     */\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.ghostTable.clean();\n      _get(_getPrototypeOf(AutoColumnSize.prototype), \"destroy\", this).call(this);\n    }\n  }], [{\n    key: \"PLUGIN_KEY\",\n    get: function get() {\n      return PLUGIN_KEY;\n    }\n  }, {\n    key: \"PLUGIN_PRIORITY\",\n    get: function get() {\n      return PLUGIN_PRIORITY;\n    }\n  }, {\n    key: \"SETTING_KEYS\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"CALCULATION_STEP\",\n    get: function get() {\n      return 50;\n    }\n  }, {\n    key: \"SYNC_CALCULATION_LIMIT\",\n    get: function get() {\n      return 50;\n    }\n  }]);\n  return AutoColumnSize;\n}(BasePlugin);","map":{"version":3,"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","Object","toString","call","slice","name","Array","from","test","len","length","arr2","_i","_s","_e","_x","_r","_arr","_n","_d","next","done","push","value","err","return","isArray","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","Number","_get","Reflect","get","bind","property","receiver","base","_superPropBase","desc","getOwnPropertyDescriptor","arguments","apply","object","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","BasePlugin","arrayEach","arrayFilter","arrayReduce","arrayMap","cancelAnimationFrame","requestAnimationFrame","GhostTable","Hooks","isObject","valueAccordingPercent","rangeEach","SamplesGenerator","isPercentValue","ViewportColumnsCalculator","PhysicalIndexToValueMap","IndexToValueMap","isDefined","getSingleton","register","PLUGIN_KEY","PLUGIN_PRIORITY","privatePool","WeakMap","COLUMN_SIZE_MAP_NAME","AutoColumnSize","_BasePlugin","_super","hotInstance","_this","set","cachedColumnHeaders","ghostTable","hot","samplesGenerator","row","column","cellMeta","getCellMeta","cellValue","spanned","getDataAtCell","bundleSeed","hasHook","runHooks","firstCalculation","inProgress","measuredColumns","columnWidthsMap","columnIndexMapper","registerMap","addHook","size","isDblClick","onBeforeColumnResize","isEnabled","getSettings","colWidths","enablePlugin","_this2","enabled","setting","useHeaders","setSetting","setSamplingOptions","onAfterLoadData","changes","onBeforeChange","onAfterFormulasValuesUpdate","force","onBeforeViewRender","width","col","getColumnWidth","onAfterInit","updatePlugin","changedColumns","findColumnsWhereHeaderWasChanged","clearCache","calculateVisibleColumnsWidth","disablePlugin","_this3","rowsCount","countRows","renderCall","firstVisibleColumn","getFirstVisibleColumn","lastVisibleColumn","getLastVisibleColumn","calculateColumnsWidth","to","_this4","colRange","countCols","rowRange","columnsRange","rowsRange","visualColumn","physicalColumn","toPhysicalColumn","getValueAtIndex","_getColWidthFromSettings","samples","generateColumnSamples","_ref","_ref2","sample","addColumn","columns","batchExecution","getWidths","setValueAtIndex","clean","calculateAllColumnsWidth","_this5","current","timer","loop","Math","min","CALCULATION_STEP","view","adjustElementsSize","syncLimit","getSyncCalculationLimit","samplingRatio","allowSampleDuplicates","isNaN","setSampleCount","parseInt","setAllowDuplicates","recalculateAllColumnsWidth","_wt","wtTable","isVisible","settings","limit","SYNC_CALCULATION_LIMIT","colsLimit","defaultWidth","keepMinimum","max","DEFAULT_WIDTH","wot","wtViewport","columnsVisibleCalculator","firstFullyVisibleColumn","getVisualFromRenderableIndex","columnsRenderCalculator","firstRenderedColumn","getFirstRenderedColumn","lastFullyVisibleColumn","lastRenderedColumn","getLastRenderedColumn","columnHeaders","getColHeader","_privatePool$get","acc","columnTitle","cachedColumnsLength","_this6","physicalIndex","clear","isNeedRecalculate","getValues","item","_this7","setTimeout","_this8","_ref3","_ref4","columnProperty","propToCol","Set","newSize","filteredChanges","change","_change$address","address","destroy"],"sources":["/home/rstorey/wwwdev/Blucktool/node_modules/handsontable/plugins/autoColumnSize/autoColumnSize.mjs"],"sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.weak-map.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/web.timers.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.object.set-prototype-of.js\";\nimport \"core-js/modules/es.object.get-prototype-of.js\";\nimport \"core-js/modules/es.reflect.construct.js\";\nimport \"core-js/modules/es.reflect.get.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/es.symbol.to-primitive.js\";\nimport \"core-js/modules/es.date.to-primitive.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport { BasePlugin } from \"../base/index.mjs\";\nimport { arrayEach, arrayFilter, arrayReduce, arrayMap } from \"../../helpers/array.mjs\";\nimport { cancelAnimationFrame, requestAnimationFrame } from \"../../helpers/feature.mjs\";\nimport GhostTable from \"../../utils/ghostTable.mjs\";\nimport Hooks from \"../../pluginHooks.mjs\";\nimport { isObject, hasOwnProperty } from \"../../helpers/object.mjs\";\nimport { valueAccordingPercent, rangeEach } from \"../../helpers/number.mjs\";\nimport SamplesGenerator from \"../../utils/samplesGenerator.mjs\";\nimport { isPercentValue } from \"../../helpers/string.mjs\";\nimport { ViewportColumnsCalculator } from \"../../3rdparty/walkontable/src/index.mjs\";\nimport { PhysicalIndexToValueMap as IndexToValueMap } from \"../../translations/index.mjs\";\nimport { isDefined } from \"../../helpers/mixed.mjs\";\nHooks.getSingleton().register('modifyAutoColumnSizeSeed');\nexport var PLUGIN_KEY = 'autoColumnSize';\nexport var PLUGIN_PRIORITY = 10;\nvar privatePool = new WeakMap();\nvar COLUMN_SIZE_MAP_NAME = 'autoColumnSize';\n\n/* eslint-disable jsdoc/require-description-complete-sentence */\n/**\n * @plugin AutoColumnSize\n * @class AutoColumnSize\n *\n * @description\n * This plugin allows to set column widths based on their widest cells.\n *\n * By default, the plugin is declared as `undefined`, which makes it enabled (same as if it was declared as `true`).\n * Enabling this plugin may decrease the overall table performance, as it needs to calculate the widths of all cells to\n * resize the columns accordingly.\n * If you experience problems with the performance, try turning this feature off and declaring the column widths manually.\n *\n * Column width calculations are divided into sync and async part. Each of this parts has their own advantages and\n * disadvantages. Synchronous calculations are faster but they block the browser UI, while the slower asynchronous\n * operations don't block the browser UI.\n *\n * To configure the sync/async distribution, you can pass an absolute value (number of columns) or a percentage value to a config object:\n *\n * ```js\n * // as a number (300 columns in sync, rest async)\n * autoColumnSize: {syncLimit: 300},\n *\n * // as a string (percent)\n * autoColumnSize: {syncLimit: '40%'},\n * ```\n *\n * The plugin uses {@link GhostTable} and {@link SamplesGenerator} for calculations.\n * First, {@link SamplesGenerator} prepares samples of data with its coordinates.\n * Next {@link GhostTable} uses coordinates to get cells' renderers and append all to the DOM through DocumentFragment.\n *\n * Sampling accepts additional options:\n * - *samplingRatio* - Defines how many samples for the same length will be used to calculate. Default is `3`.\n *\n * ```js\n *   autoColumnSize: {\n *     samplingRatio: 10,\n *   }\n * ```\n *\n * - *allowSampleDuplicates* - Defines if duplicated values might be used in sampling. Default is `false`.\n *\n * ```js\n *   autoColumnSize: {\n *     allowSampleDuplicates: true,\n *   }\n * ```\n *\n * To configure this plugin see {@link Options#autoColumnSize}.\n *\n * @example\n *\n * ::: only-for javascript\n * ```js\n * const hot = new Handsontable(document.getElementById('example'), {\n *   data: getData(),\n *   autoColumnSize: true\n * });\n * // Access to plugin instance:\n * const plugin = hot.getPlugin('autoColumnSize');\n *\n * plugin.getColumnWidth(4);\n *\n * if (plugin.isEnabled()) {\n *   // code...\n * }\n * ```\n * :::\n *\n * ::: only-for react\n * ```jsx\n * const hotRef = useRef(null);\n *\n * ...\n *\n * // First, let's contruct Handsontable\n * <HotTable\n *   ref={hotRef}\n *   data={getData()}\n *   autoColumnSize={true}\n * />\n *\n * ...\n *\n * // Access to plugin instance:\n * const hot = hotRef.current.hotInstance;\n * const plugin = hot.getPlugin('autoColumnSize');\n *\n * plugin.getColumnWidth(4);\n *\n * if (plugin.isEnabled()) {\n *   // code...\n * }\n * ```\n * :::\n */\n/* eslint-enable jsdoc/require-description-complete-sentence */\nexport var AutoColumnSize = /*#__PURE__*/function (_BasePlugin) {\n  _inherits(AutoColumnSize, _BasePlugin);\n  var _super = _createSuper(AutoColumnSize);\n  function AutoColumnSize(hotInstance) {\n    var _this;\n    _classCallCheck(this, AutoColumnSize);\n    _this = _super.call(this, hotInstance);\n    privatePool.set(_assertThisInitialized(_this), {\n      /**\n       * Cached column header names. It is used to diff current column headers with previous state and detect which\n       * columns width should be updated.\n       *\n       * @private\n       * @type {Array}\n       */\n      cachedColumnHeaders: []\n    });\n    /**\n     * Instance of {@link GhostTable} for rows and columns size calculations.\n     *\n     * @private\n     * @type {GhostTable}\n     */\n    _this.ghostTable = new GhostTable(_this.hot);\n    /**\n     * Instance of {@link SamplesGenerator} for generating samples necessary for columns width calculations.\n     *\n     * @private\n     * @type {SamplesGenerator}\n     * @fires Hooks#modifyAutoColumnSizeSeed\n     */\n    _this.samplesGenerator = new SamplesGenerator(function (row, column) {\n      var cellMeta = _this.hot.getCellMeta(row, column);\n      var cellValue = '';\n      if (!cellMeta.spanned) {\n        cellValue = _this.hot.getDataAtCell(row, column);\n      }\n      var bundleSeed = '';\n      if (_this.hot.hasHook('modifyAutoColumnSizeSeed')) {\n        bundleSeed = _this.hot.runHooks('modifyAutoColumnSizeSeed', bundleSeed, cellMeta, cellValue);\n      }\n      return {\n        value: cellValue,\n        bundleSeed: bundleSeed\n      };\n    });\n    /**\n     * `true` only if the first calculation was performed.\n     *\n     * @private\n     * @type {boolean}\n     */\n    _this.firstCalculation = true;\n    /**\n     * `true` if the size calculation is in progress.\n     *\n     * @type {boolean}\n     */\n    _this.inProgress = false;\n    /**\n     * Number of already measured columns (we already know their sizes).\n     *\n     * @type {number}\n     */\n    _this.measuredColumns = 0;\n    /**\n     * PhysicalIndexToValueMap to keep and track widths for physical column indexes.\n     *\n     * @private\n     * @type {PhysicalIndexToValueMap}\n     */\n    _this.columnWidthsMap = new IndexToValueMap();\n    _this.hot.columnIndexMapper.registerMap(COLUMN_SIZE_MAP_NAME, _this.columnWidthsMap);\n\n    // Leave the listener active to allow auto-sizing the columns when the plugin is disabled.\n    // This is necessary for width recalculation for resize handler doubleclick (ManualColumnResize).\n    _this.addHook('beforeColumnResize', function (size, column, isDblClick) {\n      return _this.onBeforeColumnResize(size, column, isDblClick);\n    });\n    return _this;\n  }\n\n  /**\n   * Checks if the plugin is enabled in the handsontable settings. This method is executed in {@link Hooks#beforeInit}\n   * hook and if it returns `true` then the {@link #enablePlugin} method is called.\n   *\n   * @returns {boolean}\n   */\n  _createClass(AutoColumnSize, [{\n    key: \"isEnabled\",\n    value: function isEnabled() {\n      return this.hot.getSettings()[PLUGIN_KEY] !== false && !this.hot.getSettings().colWidths;\n    }\n\n    /**\n     * Enables the plugin functionality for this Handsontable instance.\n     */\n  }, {\n    key: \"enablePlugin\",\n    value: function enablePlugin() {\n      var _this2 = this;\n      if (this.enabled) {\n        return;\n      }\n      var setting = this.hot.getSettings()[PLUGIN_KEY];\n      if (setting && setting.useHeaders !== null && setting.useHeaders !== void 0) {\n        this.ghostTable.setSetting('useHeaders', setting.useHeaders);\n      }\n      this.setSamplingOptions();\n      this.addHook('afterLoadData', function () {\n        return _this2.onAfterLoadData.apply(_this2, arguments);\n      });\n      this.addHook('beforeChangeRender', function (changes) {\n        return _this2.onBeforeChange(changes);\n      });\n      this.addHook('afterFormulasValuesUpdate', function (changes) {\n        return _this2.onAfterFormulasValuesUpdate(changes);\n      });\n      this.addHook('beforeViewRender', function (force) {\n        return _this2.onBeforeViewRender(force);\n      });\n      this.addHook('modifyColWidth', function (width, col) {\n        return _this2.getColumnWidth(col, width);\n      });\n      this.addHook('afterInit', function () {\n        return _this2.onAfterInit();\n      });\n      _get(_getPrototypeOf(AutoColumnSize.prototype), \"enablePlugin\", this).call(this);\n    }\n\n    /**\n     * Updates the plugin's state. This method is executed when {@link Core#updateSettings} is invoked.\n     */\n  }, {\n    key: \"updatePlugin\",\n    value: function updatePlugin() {\n      var changedColumns = this.findColumnsWhereHeaderWasChanged();\n      if (changedColumns.length) {\n        this.clearCache(changedColumns);\n        this.calculateVisibleColumnsWidth();\n      }\n      _get(_getPrototypeOf(AutoColumnSize.prototype), \"updatePlugin\", this).call(this);\n    }\n\n    /**\n     * Disables the plugin functionality for this Handsontable instance.\n     */\n  }, {\n    key: \"disablePlugin\",\n    value: function disablePlugin() {\n      var _this3 = this;\n      _get(_getPrototypeOf(AutoColumnSize.prototype), \"disablePlugin\", this).call(this);\n\n      // Leave the listener active to allow auto-sizing the columns when the plugin is disabled.\n      // This is necessary for width recalculation for resize handler doubleclick (ManualColumnResize).\n      this.addHook('beforeColumnResize', function (size, column, isDblClick) {\n        return _this3.onBeforeColumnResize(size, column, isDblClick);\n      });\n    }\n\n    /**\n     * Calculates visible columns width.\n     */\n  }, {\n    key: \"calculateVisibleColumnsWidth\",\n    value: function calculateVisibleColumnsWidth() {\n      var rowsCount = this.hot.countRows();\n\n      // Keep last column widths unchanged for situation when all rows was deleted or trimmed (pro #6)\n      if (!rowsCount) {\n        return;\n      }\n      var force = this.hot.renderCall;\n      var firstVisibleColumn = this.getFirstVisibleColumn();\n      var lastVisibleColumn = this.getLastVisibleColumn();\n      if (firstVisibleColumn === -1 || lastVisibleColumn === -1) {\n        return;\n      }\n      this.calculateColumnsWidth({\n        from: firstVisibleColumn,\n        to: lastVisibleColumn\n      }, void 0, force);\n    }\n\n    /**\n     * Calculates a columns width.\n     *\n     * @param {number|object} colRange Visual column index or an object with `from` and `to` visual indexes as a range.\n     * @param {number|object} rowRange Visual row index or an object with `from` and `to` visual indexes as a range.\n     * @param {boolean} [force=false] If `true` the calculation will be processed regardless of whether the width exists in the cache.\n     */\n  }, {\n    key: \"calculateColumnsWidth\",\n    value: function calculateColumnsWidth() {\n      var _this4 = this;\n      var colRange = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        from: 0,\n        to: this.hot.countCols() - 1\n      };\n      var rowRange = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        from: 0,\n        to: this.hot.countRows() - 1\n      };\n      var force = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      // eslint-disable-line max-len\n      var columnsRange = typeof colRange === 'number' ? {\n        from: colRange,\n        to: colRange\n      } : colRange;\n      var rowsRange = typeof rowRange === 'number' ? {\n        from: rowRange,\n        to: rowRange\n      } : rowRange;\n      rangeEach(columnsRange.from, columnsRange.to, function (visualColumn) {\n        var physicalColumn = _this4.hot.toPhysicalColumn(visualColumn);\n        if (physicalColumn === null) {\n          physicalColumn = visualColumn;\n        }\n        if (force || _this4.columnWidthsMap.getValueAtIndex(physicalColumn) === null && !_this4.hot._getColWidthFromSettings(physicalColumn)) {\n          var samples = _this4.samplesGenerator.generateColumnSamples(visualColumn, rowsRange);\n          arrayEach(samples, function (_ref) {\n            var _ref2 = _slicedToArray(_ref, 2),\n              column = _ref2[0],\n              sample = _ref2[1];\n            return _this4.ghostTable.addColumn(column, sample);\n          });\n        }\n      });\n      if (this.ghostTable.columns.length) {\n        this.hot.batchExecution(function () {\n          _this4.ghostTable.getWidths(function (visualColumn, width) {\n            var physicalColumn = _this4.hot.toPhysicalColumn(visualColumn);\n            _this4.columnWidthsMap.setValueAtIndex(physicalColumn, width);\n          });\n        }, true);\n        this.measuredColumns = columnsRange.to + 1;\n        this.ghostTable.clean();\n      }\n    }\n\n    /**\n     * Calculates all columns width. The calculated column will be cached in the {@link AutoColumnSize#widths} property.\n     * To retrieve width for specified column use {@link AutoColumnSize#getColumnWidth} method.\n     *\n     * @param {object|number} rowRange Row index or an object with `from` and `to` properties which define row range.\n     */\n  }, {\n    key: \"calculateAllColumnsWidth\",\n    value: function calculateAllColumnsWidth() {\n      var _this5 = this;\n      var rowRange = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        from: 0,\n        to: this.hot.countRows() - 1\n      };\n      var current = 0;\n      var length = this.hot.countCols() - 1;\n      var timer = null;\n      this.inProgress = true;\n      var loop = function loop() {\n        // When hot was destroyed after calculating finished cancel frame\n        if (!_this5.hot) {\n          cancelAnimationFrame(timer);\n          _this5.inProgress = false;\n          return;\n        }\n        _this5.calculateColumnsWidth({\n          from: current,\n          to: Math.min(current + AutoColumnSize.CALCULATION_STEP, length)\n        }, rowRange);\n        current = current + AutoColumnSize.CALCULATION_STEP + 1;\n        if (current < length) {\n          timer = requestAnimationFrame(loop);\n        } else {\n          cancelAnimationFrame(timer);\n          _this5.inProgress = false;\n\n          // @TODO Should call once per render cycle, currently fired separately in different plugins\n          _this5.hot.view.adjustElementsSize();\n        }\n      };\n      var syncLimit = this.getSyncCalculationLimit();\n\n      // sync\n      if (this.firstCalculation && syncLimit >= 0) {\n        this.calculateColumnsWidth({\n          from: 0,\n          to: syncLimit\n        }, rowRange);\n        this.firstCalculation = false;\n        current = syncLimit + 1;\n      }\n      // async\n      if (current < length) {\n        loop();\n      } else {\n        this.inProgress = false;\n      }\n    }\n\n    /**\n     * Sets the sampling options.\n     *\n     * @private\n     */\n  }, {\n    key: \"setSamplingOptions\",\n    value: function setSamplingOptions() {\n      var setting = this.hot.getSettings()[PLUGIN_KEY];\n      var samplingRatio = setting && hasOwnProperty(setting, 'samplingRatio') ? setting.samplingRatio : void 0;\n      var allowSampleDuplicates = setting && hasOwnProperty(setting, 'allowSampleDuplicates') ? setting.allowSampleDuplicates : void 0;\n      if (samplingRatio && !isNaN(samplingRatio)) {\n        this.samplesGenerator.setSampleCount(parseInt(samplingRatio, 10));\n      }\n      if (allowSampleDuplicates) {\n        this.samplesGenerator.setAllowDuplicates(allowSampleDuplicates);\n      }\n    }\n\n    /**\n     * Recalculates all columns width (overwrite cache values).\n     */\n  }, {\n    key: \"recalculateAllColumnsWidth\",\n    value: function recalculateAllColumnsWidth() {\n      if (this.hot.view && this.hot.view._wt.wtTable.isVisible()) {\n        this.clearCache();\n        this.calculateAllColumnsWidth();\n      }\n    }\n\n    /**\n     * Gets value which tells how many columns should be calculated synchronously (rest of the columns will be calculated\n     * asynchronously). The limit is calculated based on `syncLimit` set to `autoColumnSize` option (see {@link Options#autoColumnSize}).\n     *\n     * @returns {number}\n     */\n  }, {\n    key: \"getSyncCalculationLimit\",\n    value: function getSyncCalculationLimit() {\n      var settings = this.hot.getSettings()[PLUGIN_KEY];\n      /* eslint-disable no-bitwise */\n      var limit = AutoColumnSize.SYNC_CALCULATION_LIMIT;\n      var colsLimit = this.hot.countCols() - 1;\n      if (isObject(settings)) {\n        limit = settings.syncLimit;\n        if (isPercentValue(limit)) {\n          limit = valueAccordingPercent(colsLimit, limit);\n        } else {\n          // Force to Number\n          limit >>= 0;\n        }\n      }\n      return Math.min(limit, colsLimit);\n    }\n\n    /**\n     * Gets the calculated column width.\n     *\n     * @param {number} column Visual column index.\n     * @param {number} [defaultWidth] Default column width. It will be picked up if no calculated width found.\n     * @param {boolean} [keepMinimum=true] If `true` then returned value won't be smaller then 50 (default column width).\n     * @returns {number}\n     */\n  }, {\n    key: \"getColumnWidth\",\n    value: function getColumnWidth(column) {\n      var defaultWidth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : void 0;\n      var keepMinimum = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var width = defaultWidth;\n      if (width === void 0) {\n        width = this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(column));\n        if (keepMinimum && typeof width === 'number') {\n          width = Math.max(width, ViewportColumnsCalculator.DEFAULT_WIDTH);\n        }\n      }\n      return width;\n    }\n\n    /**\n     * Gets the first visible column.\n     *\n     * @returns {number} Returns visual column index, -1 if table is not rendered or if there are no columns to base the the calculations on.\n     */\n  }, {\n    key: \"getFirstVisibleColumn\",\n    value: function getFirstVisibleColumn() {\n      var wot = this.hot.view._wt;\n      if (wot.wtViewport.columnsVisibleCalculator) {\n        // Fist fully visible column is stored as renderable index.\n        var firstFullyVisibleColumn = wot.wtTable.getFirstVisibleColumn();\n        if (firstFullyVisibleColumn !== -1) {\n          return this.hot.columnIndexMapper.getVisualFromRenderableIndex(firstFullyVisibleColumn);\n        }\n      }\n      if (wot.wtViewport.columnsRenderCalculator) {\n        var firstRenderedColumn = wot.wtTable.getFirstRenderedColumn();\n\n        // There are no rendered column.\n        if (firstRenderedColumn !== -1) {\n          return this.hot.columnIndexMapper.getVisualFromRenderableIndex(firstRenderedColumn);\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Gets the last visible column.\n     *\n     * @returns {number} Returns visual column index or -1 if table is not rendered.\n     */\n  }, {\n    key: \"getLastVisibleColumn\",\n    value: function getLastVisibleColumn() {\n      var wot = this.hot.view._wt;\n      if (wot.wtViewport.columnsVisibleCalculator) {\n        // Last fully visible column is stored as renderable index.\n        var lastFullyVisibleColumn = wot.wtTable.getLastVisibleColumn();\n        if (lastFullyVisibleColumn !== -1) {\n          return this.hot.columnIndexMapper.getVisualFromRenderableIndex(lastFullyVisibleColumn);\n        }\n      }\n      if (wot.wtViewport.columnsRenderCalculator) {\n        // Last fully visible column is stored as renderable index.\n        var lastRenderedColumn = wot.wtTable.getLastRenderedColumn();\n\n        // There are no rendered columns.\n        if (lastRenderedColumn !== -1) {\n          return this.hot.columnIndexMapper.getVisualFromRenderableIndex(lastRenderedColumn);\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Collects all columns which titles has been changed in comparison to the previous state.\n     *\n     * @private\n     * @returns {Array} It returns an array of physical column indexes.\n     */\n  }, {\n    key: \"findColumnsWhereHeaderWasChanged\",\n    value: function findColumnsWhereHeaderWasChanged() {\n      var columnHeaders = this.hot.getColHeader();\n      var _privatePool$get = privatePool.get(this),\n        cachedColumnHeaders = _privatePool$get.cachedColumnHeaders;\n      var changedColumns = arrayReduce(columnHeaders, function (acc, columnTitle, physicalColumn) {\n        var cachedColumnsLength = cachedColumnHeaders.length;\n        if (cachedColumnsLength - 1 < physicalColumn || cachedColumnHeaders[physicalColumn] !== columnTitle) {\n          acc.push(physicalColumn);\n        }\n        if (cachedColumnsLength - 1 < physicalColumn) {\n          cachedColumnHeaders.push(columnTitle);\n        } else {\n          cachedColumnHeaders[physicalColumn] = columnTitle;\n        }\n        return acc;\n      }, []);\n      return changedColumns;\n    }\n\n    /**\n     * Clears cache of calculated column widths. If you want to clear only selected columns pass an array with their indexes.\n     * Otherwise whole cache will be cleared.\n     *\n     * @param {number[]} [columns] List of physical column indexes to clear.\n     */\n  }, {\n    key: \"clearCache\",\n    value: function clearCache() {\n      var _this6 = this;\n      var columns = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      if (columns.length) {\n        this.hot.batchExecution(function () {\n          arrayEach(columns, function (physicalIndex) {\n            _this6.columnWidthsMap.setValueAtIndex(physicalIndex, null);\n          });\n        }, true);\n      } else {\n        this.columnWidthsMap.clear();\n      }\n    }\n\n    /**\n     * Checks if all widths were calculated. If not then return `true` (need recalculate).\n     *\n     * @returns {boolean}\n     */\n  }, {\n    key: \"isNeedRecalculate\",\n    value: function isNeedRecalculate() {\n      return !!arrayFilter(this.columnWidthsMap.getValues().slice(0, this.measuredColumns), function (item) {\n        return item === null;\n      }).length;\n    }\n\n    /**\n     * On before view render listener.\n     *\n     * @private\n     */\n  }, {\n    key: \"onBeforeViewRender\",\n    value: function onBeforeViewRender() {\n      this.calculateVisibleColumnsWidth();\n      if (this.isNeedRecalculate() && !this.inProgress) {\n        this.calculateAllColumnsWidth();\n      }\n    }\n\n    /**\n     * On after load data listener.\n     *\n     * @private\n     */\n  }, {\n    key: \"onAfterLoadData\",\n    value: function onAfterLoadData() {\n      var _this7 = this;\n      if (this.hot.view) {\n        this.recalculateAllColumnsWidth();\n      } else {\n        // first load - initialization\n        setTimeout(function () {\n          if (_this7.hot) {\n            _this7.recalculateAllColumnsWidth();\n          }\n        }, 0);\n      }\n    }\n\n    /**\n     * On before change listener.\n     *\n     * @private\n     * @param {Array} changes An array of modified data.\n     */\n  }, {\n    key: \"onBeforeChange\",\n    value: function onBeforeChange(changes) {\n      var _this8 = this;\n      var changedColumns = arrayMap(changes, function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n          columnProperty = _ref4[1];\n        return _this8.hot.toPhysicalColumn(_this8.hot.propToCol(columnProperty));\n      });\n      this.clearCache(Array.from(new Set(changedColumns)));\n    }\n\n    /**\n     * On before column resize listener.\n     *\n     * @private\n     * @param {number} size Calculated new column width.\n     * @param {number} column Visual index of the resized column.\n     * @param {boolean} isDblClick  Flag that determines whether there was a double-click.\n     * @returns {number}\n     */\n  }, {\n    key: \"onBeforeColumnResize\",\n    value: function onBeforeColumnResize(size, column, isDblClick) {\n      var newSize = size;\n      if (isDblClick) {\n        this.calculateColumnsWidth(column, void 0, true);\n        newSize = this.getColumnWidth(column, void 0, false);\n      }\n      return newSize;\n    }\n\n    /**\n     * On after Handsontable init fill plugin with all necessary values.\n     *\n     * @private\n     */\n  }, {\n    key: \"onAfterInit\",\n    value: function onAfterInit() {\n      privatePool.get(this).cachedColumnHeaders = this.hot.getColHeader();\n    }\n\n    /**\n     * After formulas values updated listener.\n     *\n     * @private\n     * @param {Array} changes An array of modified data.\n     */\n  }, {\n    key: \"onAfterFormulasValuesUpdate\",\n    value: function onAfterFormulasValuesUpdate(changes) {\n      var filteredChanges = arrayFilter(changes, function (change) {\n        var _change$address;\n        return isDefined((_change$address = change.address) === null || _change$address === void 0 ? void 0 : _change$address.col);\n      });\n      var changedColumns = arrayMap(filteredChanges, function (change) {\n        return change.address.col;\n      });\n      this.clearCache(Array.from(new Set(changedColumns)));\n    }\n\n    /**\n     * Destroys the plugin instance.\n     */\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.ghostTable.clean();\n      _get(_getPrototypeOf(AutoColumnSize.prototype), \"destroy\", this).call(this);\n    }\n  }], [{\n    key: \"PLUGIN_KEY\",\n    get: function get() {\n      return PLUGIN_KEY;\n    }\n  }, {\n    key: \"PLUGIN_PRIORITY\",\n    get: function get() {\n      return PLUGIN_PRIORITY;\n    }\n  }, {\n    key: \"SETTING_KEYS\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"CALCULATION_STEP\",\n    get: function get() {\n      return 50;\n    }\n  }, {\n    key: \"SYNC_CALCULATION_LIMIT\",\n    get: function get() {\n      return 50;\n    }\n  }]);\n  return AutoColumnSize;\n}(BasePlugin);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}